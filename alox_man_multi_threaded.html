<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ALox: 09 - Multi-Threaded Processes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALox
   &#160;<span id="projectnumber">V. 1712 R. 0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!--ALox Main Menu-->
<div style="background: #2f3a48; " >
<table  class="aworx-menutable"  >
 <tbody>
 <tr style="height: 36px;">
  <td> <a class="aworx-menu_hl" href="index.html"                                      >Home</a>                        </td>
  <td> <a class="aworx-menu"    href="cpp_ref/alox_cpp_mainpage.html"                   >ALox for C++</a>                </td>
  <td> <a class="aworx-menu"    href="cs_ref/alox_cs_mainpage.html"                     >ALox for C#</a>                 </td>
  <td> <a class="aworx-menu"    href="java_ref/alox_java_mainpage.html"                 >ALox for Java</a>               </td>
  <td> <a class="aworx-menu"    href="https://github.com/AlexWorx/ALox-Logging-Library">Download</a></td>
 </tr>
 </tbody>
</table>
</div>
<!--end ALox Main Menu-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">09 - Multi-Threaded Processes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="alox_man_multi_threaded_intro"></a>
1. Introduction</h1>
<p>What does "logging" have to do with multi-threaded applications? Quite a bit, as we will see in this chapter.</p>
<p>As a prerequisite the differences of accessing thread information with the different language incarnations of <b>ALox</b>, namely <a href="cpp_ref/alox_cpp_mainpage.html">ALox for C++</a>, <a href="cs_ref/alox_cs_mainpage.html">ALox for C#</a> and <a href="java_ref/alox_java_mainpage.html">ALox for Java</a> should be highlighted.</p>
<p>C# and Java provide thread management with their standard library, which simplifies things a lot. Any "native" 3rd party thread library which might be used by C# and Java applications are surely not compatible with the thread features of <b>ALox</b>, but there are only a few around and those are quite seldom.</p>
<p>In contrast to that, things are not so standardized in C++. But as <b>ALox</b> is using C++ 11 as a minimum version, there is now some good start of support found in namespace <code>std</code>. <b>ALib</b>, the utility library that <b>ALox</b> is built upon, has a design goal to align the three languages wherever possible and reasonable. In respect to thread management, <b>ALib for C++</b> adds a very <b>thin layer</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1threads.html">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lib_1_1threads.html">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/namespacecom_1_1aworx_1_1lib_1_1threads.html">Java</a>) over what C++ namespace <code>std</code> provides, which mostly is learned from thread-classes found in Java. But this is really thin, just a "wrapper" you could say. Roughly it works as follows:</p><ul>
<li>classes <b>Thread</b> and <b>Runnable</b> exist which have a similar interface to their Java-based counterparts.</li>
<li>Each <b>Thread</b> instance created is hashed in a static table for future reference.</li>
<li>Static method <b>Threads::CurrentThread</b> uses <b>std::this_thread::get_id()</b> to identify the current thread. If no corresponding <b>Thread</b> instance is found in the aforementioned static list of threads, then a new object is created, added to the list and returned.</li>
</ul>
<p>As a consequence, <b>ALox</b> detects all those threads rightfully that are detected by <b>std::this_thread::get_id()</b>. In general this works with all major combinations of modern operating systems, C++ 11 libraries and thread libraries. Should threads not be detected, check out whether the thread library you are using is compatible with thread tools found C++ 11 library <code>"std"</code>. The other way round: if you are using a threading library that creates threads that are detected by C++ 11 library <code>"std"</code>, then you can use <b>ALox</b> thread features without any further action. If not, you should consider either to switch your library to something that is compatible with this modern standard, or use the thread classes provided with <b>ALib</b> (if you use <b>ALox</b>, you have ALib available). But the latter is a quite simplified limited piece of art - enough for simple applications, but not more!</p>
<h1><a class="anchor" id="alox_man_multi_threaded_mapping"></a>
2. Mapping Thread Names</h1>
<p>ALox collects information about the thread that was executing a <em>Log Statement</em>. For textual logging, class <b>MetaInfo</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1core_1_1textlogger_1_1MetaInfo.html">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1core_1_1textlogger_1_1MetaInfo.html">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1core_1_1textlogger_1_1MetaInfo.html">Java</a>), which is a plugged-in tool class of class <b>TextLogger</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">Java</a>), writes the name of the executing thread by default. This default is defined with substring "%tN" in field <b>MetaInfo.Format</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1core_1_1textlogger_1_1MetaInfo.html#a5f73a9d6a9bfabaa4a33c34831006d07">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1core_1_1textlogger_1_1MetaInfo.html#a5f73a9d6a9bfabaa4a33c34831006d07">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1core_1_1textlogger_1_1MetaInfo.html#ade879c363f20d8d0acb216f8bf40d1af">Java</a>). Now, if you want to change the name (without changing your applications' true thread name), then method <b>Lox.MapThreadName</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a3911541857ea84938dede341ceb64ddd">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a9412be382fff615a96d70d2ae09e712a">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html#a8004a334af1a78b763447f2b06fafe12">Java</a>) does the job. With this method, you do not rename a thread, you just tell the <b>Lox</b> to provide a different name to the <em>Loggers</em> in future <em>Log Statements</em>. Thread names can be mapped for the current thread or for threads passed via optional parameter <code>thread</code>, respectively <code>id</code>.</p>
<p>A sample for using this method is given in the tutorial chapter <b>Name Your Threads</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/alox_cpp_tutorial.html#alox_tutcpp_threadnames">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/alox_cs_tutorial.html#tutcs_threadnames">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/alox_java_tutorial.html#alox_java_tut_threadnames">Java</a>).</p>
<h1><a class="anchor" id="alox_man_multi_threaded_scopes"></a>
3. Thread-Related Scopes</h1>
<p>With the fundamental concept of having <em>Scopes</em> in <b>ALox</b>, and in particular with the fact that <b>ALox</b> "interweaves" so called <b>Scope.ThreadInner</b> and <b>Scope.ThreadOuter</b> with other language-related scopes (e.g. <b>Scope.Method</b>) and the global <em>Scope</em>, <b>ALox</b> supports much more of multi-threaded applications than just mapping new names to threads!</p>
<p>This is a complex topic and there is a whole bunch of chapters we have to refer you to:</p><ul>
<li><a class="el" href="alox_man_scopes.html">05 - Scopes in ALox</a></li>
<li><a class="el" href="alox_man_log_once.html">06 - Lox.Once()</a>,</li>
<li><a class="el" href="alox_man_prefix_logables.html">07 - Prefix Logables</a> and</li>
<li><a class="el" href="alox_man_log_data.html">08 - Log Data (Debug Variables)</a>.</li>
</ul>
<p>To name just a few "applications" of the features described in the chapters above:</p>
<ul>
<li>Execute a <em>Log Statement</em> only if executed (or just not executed) by a certain thread.</li>
<li>Separate <em>Log Statements</em> depending on the thread they are executed by, and control the <em>Verbosity</em> independently from each other. By mixing thread-related <em>Scope Domains</em> and language related <em>Scope Domains</em> with each other, a user of <b>ALox</b> is enabled to fine-tune the log output very granular, even for logging code that he/she has no access to.</li>
<li>Execute <em>Log Statements</em> once per thread.</li>
<li>Assign prefix strings (respectively arbitrary <em>Logables</em>) to each <em>Log Statement</em> executed by a certain thread.</li>
<li>Store and retrieve named <em>Log Domain</em> objects (debug-information) associated with threads.</li>
</ul>
<hr/>
 <center>Next chapter: <a class="el" href="alox_man_debug_and_release_logging.html">10 - Differences of Debug- and Release-Logging</a> </center> <center> <a class="el" href="manual.html">Back to index</a> </center> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 22 2017 22:23:19 for ALox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
<!-- Start of StatCounter Code e -->
<script type="text/javascript">
var sc_project=11242602;
var sc_invisible=1;
var sc_security="5ac13373";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web statistics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11242602/0/5ac13373/1/" alt="web
statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>
