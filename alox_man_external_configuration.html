<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ALox: 12 - External Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALox
   &#160;<span id="projectnumber">V. 1903 R. 0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!--ALox Main Menu-->
<div style="background: #2f3a48; " >
<table  class="aworx-menutable"  >
 <tbody>
 <tr style="height: 36px;">
  <td> <a class="aworx-menu_hl" href="index.html"                                      >Home</a>                        </td>
  <td> <a class="aworx-menu"    href="cpp_ref/alox_cpp_mainpage.html"                   >ALox for C++</a>                </td>
  <td> <a class="aworx-menu"    href="cs_ref/alox_cs_mainpage.html"                     >ALox for C#</a>                 </td>
  <td> <a class="aworx-menu"    href="java_ref/alox_java_mainpage.html"                 >ALox for Java</a>               </td>
  <td> <a class="aworx-menu"    href="https://github.com/AlexWorx/ALox-Logging-Library">Download</a></td>
 </tr>
 </tbody>
</table>
</div>
<!--end ALox Main Menu-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">12 - External Configuration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#alox_man_external_configuration_intro">1. Introduction</a></li>
<li class="level1"><a href="#alox_man_external_configuration_relationship">2. Relationship of ALox, Applications and Configuration Data</a></li>
<li class="level1"><a href="#alox_man_external_configuration_alox">3. How ALox Uses the ALib Configuration System</a></li>
<li class="level1"><a href="#alox_man_external_configuration_concrete">4. Concrete Steps on Integrating ALox Configuration in your Software</a></li>
<li class="level1"><a href="#alox_man_external_configuration_cpp_specifics">5. C++ Language Version Specifics</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="alox_man_external_configuration_intro"></a>
1. Introduction</h1>
<p>With the term <em>"external configuration"</em>, we are addressing any type of configuration data that an application might have access to. The most common types of such configuration data are:</p><ul>
<li>Command line parameters</li>
<li>Environment variables and</li>
<li>Configuration files, e.g. "INI files"</li>
</ul>
<p>For reading such configuration data, <b>ALox</b> relies on the facilities provided by underlying utility library <b>ALib</b>. Configuration mechanics of <b>ALib</b> are gathered in namespace <b>[com::|cs::]aworx::lib::config</b>. It is advisable to read the <b>reference documentation</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1config.html">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lib_1_1config.html">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/namespacecom_1_1aworx_1_1lib_1_1config.html">Java</a>) of that namespace and its few classes.</p>
<p><b>In short, the features of the ALib configuration system are:</b></p>
<ul>
<li>A public static singleton of class <b>Configuration</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1config_1_1Configuration.html">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1Configuration.html">Java</a>) is found in field <b>ALIB.Config</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1Module.html#a7e8a1c3ae5bce4e178fa1d122021bb7d">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1ALIB.html#a34430993f800b3bc4571bd4b9a6d9184">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1ALIB.html#a0910717551963df697d192900a7f4f59">Java</a>).</li>
<li>Class <b>Configuration</b> supports <b>'plug-ins'</b> that read configuration data from different sources.</li>
<li>Default plug-ins are those for reading <b>command-line parameters</b> and <b>environment variables</b>. In addition, a class to read (and write) INI files is provided and an instance of that class can easily be created and attached. <dl class="section note"><dt>Note</dt><dd>But instead, <b>ALib</b> proposes to attach custom configuration file processing - use your own standard! What is need to be done is to write a small plug-in that translates requests to read (and if possible, also write) variables into your custom configuration system.</dd></dl>
</li>
<li>The different <b>plug-ins</b> are asked for configuration data in a sequence defined by their <b>priority</b>. For example, command-line parameters have a higher priority than variables defined in an INI file. This way, command-line parameters 'overwrite' INI file entries.</li>
<li>Variables can contain references to other variables. This concept named <b> variable substitution</b>, allows even more flexible configuration possibilities .</li>
</ul>
<h1><a class="anchor" id="alox_man_external_configuration_relationship"></a>
2. Relationship of ALox, Applications and Configuration Data</h1>
<p>It may be very obvious to the reader, but lets spend a minute and think about the relationship of <b>ALox</b> and applications using it.</p>
<ul>
<li><b>ALox</b> is embedded as a library in applications, they live in one process.</li>
<li><b>ALox</b> longs to read external configuration data</li>
<li>The application itself probably does this as well and probably disposes of a system to maintain and read such data already</li>
<li><b>ALox</b> may want to write default values into the configuration (if a variable was not found)</li>
</ul>
<p>In most use cases, the goal now is to enable <b>ALox</b> to access (read and write) the configuration that is already in place with the application. The huge benefit of this approach is, that no second configuration file or database is needed. And this is exactly what <b>ALib</b> - and therewith <b>ALox</b> - allows to achieve.</p>
<p>Then, other use cases and variants are:</p><ul>
<li>Having separated configuration systems for the application and <b>ALox</b>. For documentation on how to do this, see method <b>ALox::Init</b> (<a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#a7f8d4aeafdb18488a3759bb3b6cbffb2">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#a6da749cfe46018196a565f2b4bfb1f27">Java</a>).) respectively class <b>Module</b> <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1Module.html">(C++)</a></li>
<li>Have <b>no</b> configuration system for ALox: The most obvious reason why this might be wanted is that a developer of an ALox enabled software might not want to allow the end user to reconfigure <b>ALox</b> (i.e. switching a <em>Logger</em> off that collects telemetric data).</li>
<li>A mixed approach: Some <b>ALox</b> features should be configurable (from either configuration system) while other features should not be configurable from outside.</li>
<li>Similar to this, some default values (that <b>ALox</b> creates on the fly) should automatically appear and be saved in the configuration. The benefit of this is that the user gets a fully filled configuration with maybe automatically commented entries that hints him/her to what is adjustable - all without reading manuals. Other of such <b>ALox</b> options probably should not automatically be saved. If not saved, these are regenerated as default values on the next run and again not be saved. A simple reason to disallow saving default values might be to avoid that the external configuration is being 'bloated' with <b>ALox</b> options that the user of an application is not interested in.</li>
</ul>
<p>Finally, as <b>ALox</b> is a library, there might be more than one <b>ALox</b> enabled software running on the same system. Now, for configuration sources like INI files and command line parameters, this is not problematic. In the case of environment variables, it might become a problem: A variable setting here could influence more than one application if variables are not renamed on a per application basis.</p>
<h1><a class="anchor" id="alox_man_external_configuration_alox"></a>
3. How ALox Uses the ALib Configuration System</h1>
<p>Well, as <b>ALib</b> and <b>ALox</b> are developed by the same team, of-course <b>ALox</b> uses the configuration system of <b>ALib</b> exactly as the <b>ALib</b> developers expect their users to do!</p>
<dl class="section note"><dt>Note</dt><dd>For details consult the <b>reference documentation</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1config.html">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lib_1_1config.html">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/namespacecom_1_1aworx_1_1lib_1_1config.html">Java</a>) provided with <b>ALib</b>.</dd></dl>
<p><b>In</b> the JAVA and C# Version, ALox leaves field <b>ALIB::ConfigCategory</b> (<a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1ALIB.html#ad493f5410dd6d760026506bd004285cd">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1ALIB.html#a99bc0357098bd21444efbafe19704712">Java</a>) untouched (it remains default "ALIB") while exposing an own, similar field <b>ALox::ConfigCategory</b> (<a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#ad493f5410dd6d760026506bd004285cd">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#a99bc0357098bd21444efbafe19704712">Java</a>) defaulting to "ALOX". This allows a user of the library to change the category names In the C++ version such change is supported due to the declaration of all variables using <b>enum</b> meta data <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/structaworx_1_1lib_1_1resources_1_1T__EnumMetaDataDecl.html">(C++)</a> defined with macro <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/group__GrpALibMacros.html#ga544d0ac7c89d51a4445b9d46d73e103e">ALIB_CONFIG_VARIABLES</a>.</p>
<p>All configuration variables are declared in one place. (In Java and C# versions with static initializations of object of type class (struct) <b>VariableDecl</b> (<a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/structcs_1_1aworx_1_1lib_1_1config_1_1VariableDecl.html">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1VariableDecl.html">Java</a>, in C++ with enumeration <b>Variables</b> <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1lox.html#a382a38852335f58a53739d455c7d67c9">(C++)</a>.)</p>
<p>When using interface method <b>Configuration::Store</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1config_1_1Configuration.html#a972bad3145dc66bea80921d0e67eadad">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#a43e9764846a599ef381db65b73fd7ebc">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1Configuration.html#a454f981ef44f6c9a569dbe13573fd275">Java</a>) to write configuration data, new variables are exclusively created within a plug-in set up at or below priority <b>PrioDefaultValues</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1config.html#a4f738b6463e8c773284e5173741814ddaff1c11ab5744d2a4a07760b31e816e7f">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#acc96dac6a4ac6625c609dae85ed53e0e">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1Configuration.html#ae4177d538925ca1d6b9858078c3ea513">Java</a>). By default, this is of type <b>InMemoryPlugin</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1config_1_1InMemoryPlugin.html">C++</a>,<a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1InMemoryPlugin.html">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1InMemoryPlugin.html">Java</a>).</p>
<p>Finally, <b>ALox</b> leverages the flexibility that the priorities of the <b>ALib</b> configuration system brings by exposing parameter <span>priority</span> in methods <b>Lox.SetVerbosity</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1lox_1_1Lox.html#ae4c0ce357e8f2cc4572bfe4c02adf23c">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a57455d6cf16f07d3e3d6d2acf71a71a1">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html#aa8b1df498e4a9039c9b9a958f2186a05">Java</a>) and <b>Lox.SetSourcePathTrimRule</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1lox_1_1Lox.html#a1405df127229b099057f5c2f8faa4e2a">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a72c8bbc9f4e8c751a7e8920040812a80">C#</a>). On the one hand, these methods are fully aligned with the configuration system, as parameter <span>priority</span> defaults to <b>PrioDefaultValues</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1config.html#a4f738b6463e8c773284e5173741814ddaff1c11ab5744d2a4a07760b31e816e7f">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#acc96dac6a4ac6625c609dae85ed53e0e">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1Configuration.html#ae4177d538925ca1d6b9858078c3ea513">Java</a>).</p>
<p>This way, what is set 'in code' is (by default) overruled by any type of external configuration. On the other hand, a programmer may specify a different priority and this way either allow only certain, higher prioritized external sources to overwrite, or just disallow it.</p>
<dl class="section note"><dt>Note</dt><dd>Of-course, by just writing the corresponding values into the plug-in found with priority <b>PrioProtectedValues</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1config.html#a4f738b6463e8c773284e5173741814dda663d90fa900995eda127ba7745719104">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#a99234e433b0f7d5a269426910e255637">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1Configuration.html#af069e20d07d2fff49d0b2591c356b08b">Java</a>) such protection could be reached as well, but by exposing the parameter with the methods, an alternative, maybe more natural and less error prone way of implementing such protection is offered.</dd></dl>
<p><b>For the user of <b>ALox</b>, the benefits of the approach <b>ALox</b> takes are:</b></p>
<ul>
<li><b>ALox</b> does not impose new requirements to the <b>ALib</b> configuration system. In respect to the plug-ins installed, everything remains untouched</li>
<li><b>ALib</b> allows to have its external variables modified in the following respect<ul>
<li>Variable names can be changed</li>
<li>Category can be changed: either for a subset of the variables or for all. Even different category names can be chosen</li>
<li>Default values of <b>ALox</b> variables can be changed</li>
<li>Variable comments can be changed. Especially, those may come from a pool of externalized strings.</li>
</ul>
</li>
<li>Single <b>ALox</b> variables (or all) can be excluded from the possibility to be modified from outside.</li>
<li><b>ALox</b> will not bloat an applications' external configuration system with own variables, unless explicitly demanded:<ul>
<li>An application may also choose to expose only selected variables to the outside.</li>
<li>An application may store <b>ALib</b> and <b>ALox</b> configuration data in a separated configuration file. (See <b>ALox::Init</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/alib_manual.html#alib_manual_bootstrapping_different_resconf">C++</a>), <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#a77b54b5ee9fbe4476e34b825fefeddbe">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#acee3974944e5898adc148fc4f7524dba">Java</a>).)</li>
</ul>
</li>
<li>A custom configuration plug-in will not only work in respect to prioritizing values of external variables, but also in respect to consistency with <b>ALox</b> verbosity settings.</li>
</ul>
<h1><a class="anchor" id="alox_man_external_configuration_concrete"></a>
4. Concrete Steps on Integrating ALox Configuration in your Software</h1>
<p>After the discussion of the previous sections it should be quite straightforward to understand how <b>ALox</b> is to be integrated to your software in respect to external configuration data. Here are some hints:</p>
<ul>
<li>Create a custom plug-in (using your custom config system) and attach it to singleton <b>ALox.Config</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1Module.html#a7e8a1c3ae5bce4e178fa1d122021bb7d">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#a34430993f800b3bc4571bd4b9a6d9184">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#a0910717551963df697d192900a7f4f59">Java</a>).<ul>
<li>Create a class that has access to your config system</li>
<li>implement the interface ConfigurationPlugin within this class</li>
<li>Plug it in</li>
</ul>
</li>
<li><p class="startli">Alternatively: create an instance of <b>IniFile</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1config_1_1IniFile.html">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1IniFile.html">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1IniFile.html">Java</a>) and attach this instead.</p>
<p class="startli">The following code samples this in C#: </p><div class="fragment"><div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> Main( <span class="keywordtype">string</span>[] args )</div><div class="line">    {</div><div class="line">        <span class="comment">// first attach INI file to config system...</span></div><div class="line">        <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#aef31dd55ee6403c15d9ba93325d3333d">IniFile</a> iniFile= <span class="keyword">new</span> <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#aef31dd55ee6403c15d9ba93325d3333d">IniFile</a>();</div><div class="line">        <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#a9b321d2f72b975b304aa678e20344e7a">Configuration</a> config= <span class="keyword">new</span> <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#a9b321d2f72b975b304aa678e20344e7a">Configuration</a>();</div><div class="line">        config.SetCommandLineArgs( args );</div><div class="line">        config.InsertPlugin( iniFile, <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#a9b321d2f72b975b304aa678e20344e7a">Configuration</a>.PrioStandard );</div><div class="line"></div><div class="line">        <span class="comment">// .. then initialize ALox Logging Library</span></div><div class="line">        <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#af9d44d8ad66d25315fb6deb981162a0f">ALox</a>.<a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1Module.html#a8daf245bb6c7b2d7d9f4060e3333533e">Init</a>( config );</div><div class="line">        <span class="comment">//...</span></div></div><!-- fragment --> <div class="fragment"><div class="line">        <span class="comment">//...</span></div><div class="line">        <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#a67b27cdaa56b497f41ac5c0a3405dcfd">ALIB</a>.<a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1Module.html#a7e8a1c3ae5bce4e178fa1d122021bb7d">Config</a>.<a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1PluginContainer.html#a12da6b5f9ce8fe0c80261384ab45e071">RemovePlugin</a>( iniFile );</div><div class="line">        <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#a67b27cdaa56b497f41ac5c0a3405dcfd">ALIB</a>.<a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1Module.html#a7e8a1c3ae5bce4e178fa1d122021bb7d">Config</a>.<a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1config_1_1Configuration.html#ad53de948212178e51083577a9d10221c">FetchFromDefault</a>( iniFile );</div><div class="line">        iniFile.WriteFile();</div><div class="line"></div><div class="line">        <a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx.html#a67b27cdaa56b497f41ac5c0a3405dcfd">ALIB</a>.<a class="codeRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1Module.html#a2a0bcae1f7341255492ebc90deab5f01">TerminationCleanUp</a>();</div><div class="line">    }</div></div><!-- fragment --></li>
<li>Set <b>ALib::ConfigCategory</b> and <b>ALox::ConfigCategory</b> to preferred values, e.g. your own application name (to avoid clashing of environment variables when two <b>ALib</b> enabled applications exist.</li>
<li>If wanted, change the definitions of the various configuration variables, like:<ul>
<li><b>ALIB.LOCALE</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib.html#a382a38852335f58a53739d455c7d67c9a175d5afd5eed05a9553f94bbecd80a19">C++</a>)</li>
<li><b>ALIB.WAIT_FOR_KEY_PRESS</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib.html#a382a38852335f58a53739d455c7d67c9ad954142e6b2438f23548596d3051f9ea">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1ALIB.html#ad00c43d9ae3de2b4219630946b9951bb">C#</a>)</li>
<li><b>ALIB.HAS_CONSOLE_WINDOW</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib.html#a382a38852335f58a53739d455c7d67c9a069e3d8e83ed5666e104a6a6f6dcb634">C++</a>)</li>
<li><b>ALox.CONSOLE_TYPE</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1lox.html#a382a38852335f58a53739d455c7d67c9a3906ee006af77b8fa8262283f9caf7e4">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#ae7cd9610f28482a6c307bcb78661047e">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#ae7cd9610f28482a6c307bcb78661047e">Java</a>)</li>
<li><b>ALox.VERBOSITY</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1lox.html#a382a38852335f58a53739d455c7d67c9a47a219833a4b3a09240896c88b2b1969">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#a4fbab595fa43928d576869e2fcde8f44">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#a4fbab595fa43928d576869e2fcde8f44">Java</a>)</li>
<li><b>ALox.PREFIXES</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1lox.html#a382a38852335f58a53739d455c7d67c9ac8dd1a6634966abd5efb5d86d4db378f">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#a356160ccbbf174202c8b5fa40c785064">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#a356160ccbbf174202c8b5fa40c785064">Java</a>)</li>
<li><b>ALox.FORMAT</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1lox.html#a382a38852335f58a53739d455c7d67c9a47c8929b6152d540597c758853ff95a2">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#a084c50c2ffec1d67f5b35887513b640e">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#a084c50c2ffec1d67f5b35887513b640e">Java</a>)</li>
<li>...</li>
</ul>
</li>
<li>Set values that result from own application logic. A simple sample is command line parameter --verbose which might lead to 'programatically' changes in the domains' verbosities.</li>
<li>Protect values that must not be changed from outside by storing a fixed value with priority <b>PrioProtectedValues</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1config.html#a4f738b6463e8c773284e5173741814dda663d90fa900995eda127ba7745719104">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#a99234e433b0f7d5a269426910e255637">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1Configuration.html#af069e20d07d2fff49d0b2591c356b08b">Java</a>)</li>
<li><p class="startli">Apply the previous two steps to one variable to redefine configuration behavior. Let's stick to the sample of having the --verbose switch. Imagine this option should get three possible values: 'silent', 'normal' and 'verbose'. The approach to take is the following:</p><ul>
<li>Programmatically add three new custom variables stored as protected values. Their names might be <code>MYAPP_VERBOSITY_1[2|3]</code> . These custom variables contain the verbosity settings for all <em>Log Domains</em> for each of the three switchable verbosities</li>
<li>Depending on the command line switch, set the value of variable <b>ALox.VERBOSITY</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/namespaceaworx_1_1lib_1_1lox.html#a382a38852335f58a53739d455c7d67c9a47a219833a4b3a09240896c88b2b1969">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1ALox.html#a4fbab595fa43928d576869e2fcde8f44">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1ALox.html#a4fbab595fa43928d576869e2fcde8f44">Java</a>) to <code>"$MYAPP_VERBOSITY_1[2|3]"</code>, also in protected mode. The <code>'$'</code> sign here substitutes the variables' value with the contents of named variable.</li>
</ul>
<p class="startli">What is achieved here, is that there are custom 'presets' defined for the verbosities and those are all that the end-user can set! <br />
</p>
<p class="startli">Furthermore, if the substitution would be set to <code>"$MYAPP_UNDOCUMENTED_SWITCH ; $MYAPP_VERBOSITY_1[2|3]"</code> then, in addition, a hidden new configuration variable is exposed. This might be used in "the field" when something goes wrong with a deployed application and more logging is wanted, because with this new undocumented variable each <em>Log Domain</em> is switchable again.</p>
</li>
<li>Finally, before the termination of a process, copy those auto-generated <b>ALox</b> variables that you are interested in to your write-enabled configuration plug-in. This way, the user sees variables with comments and learns how to leverage those. The sample above uses method <b>Configuration.FetchFromDefault</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1config_1_1Configuration.html#ad53de948212178e51083577a9d10221c">C++</a>, <a class="elRef" doxygen="html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#a98a53188e0b7acaf703f292385aca2b9">C#</a>, <a class="elRef" doxygen="html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lib_1_1config_1_1Configuration.html#a61e7c26b97497b06e398fb83f0e9d6f6">Java</a>) to do so. This method copies all values not found in the given plug-in from the default values plug-in. Instead of using this simple method, a selective approach can be taken to copy exactly the values wanted.</li>
</ul>
<h1><a class="anchor" id="alox_man_external_configuration_cpp_specifics"></a>
5. C++ Language Version Specifics</h1>
<p>What was said above is generally true for the C++ version of <b>ALib/<b>ALox</b>.</b> However, there are some differences:</p><ul>
<li>The library initialization process is a little more complex. It is done in different phases. To add a user-defined configuration plug-in, a first phase of initialization has to be performed. The details are documented with class <b>Module</b> <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1Module.html">(C++)</a>.</li>
<li>Variable names, their defaults and help texts may be changed using external resources. For changing the resources, the library initialization has to be invoked in different phases. Details are documented with class <b>Resources</b> <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALib/html/cpp_ref.tag:https://alexworx.github.io/ALib-Class-Library/" href="https://alexworx.github.io/ALib-Class-Library/classaworx_1_1lib_1_1resources_1_1Resources.html">(C++)</a>.</li>
</ul>
<hr/>
 <center>Next chapter: <a class="el" href="alox_man_external_verbosity_configuration.html">13 - External Verbosity Configuration</a> </center> <center> <a class="el" href="manual.html">Back to index</a> </center> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Mar 16 2019 15:23:19 for ALox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
<!-- Start of StatCounter Code e -->
<script type="text/javascript">
var sc_project=11242602;
var sc_invisible=1;
var sc_security="5ac13373";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web statistics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11242602/0/5ac13373/1/" alt="web
statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>
