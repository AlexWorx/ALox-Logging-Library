<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ALox: ALox and the C++ Preprocessor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!-- so strange, that doxgen does not highlight each menu item. Just some... -->
<script>
  $(document).ready(function() {     
    fnameStart= window.location.href.lastIndexOf('/')
    fnameEnd=   window.location.href.indexOf('_', fnameStart )
    if( fnameEnd < 0 ) {
        fnameEnd=   window.location.href.indexOf('.', fnameStart )
    }
    if( fnameEnd > -1 ) {
        subString= window.location.href.substring( fnameStart, fnameEnd )
        $('li').toArray().forEach(function(li){
            if(     typeof li.firstChild.href != 'undefined'
                &&  li.firstChild.href.indexOf(subString) > 0 
                ){
               li.classList.add('current');
            }
        });
    }
  });
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ALox 
   &#160;<span id="projectnumber">Logging for C++, C# and Java (V 1.2.0)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../index.html"><span>ALox&#160;Home</span></a></li>
      <li><a href="../faq.html"><span>FAQ</span></a></li>
      <li><a href="../manual.html"><span>Manual</span></a></li>
      <li class="current"><a href="cppmainpage.html"><span>ALox&#160;for&#160;C++</span></a></li>
      <li><a href="../cs_ref/csmainpage.html"><span>ALox&#160;for&#160;C#</span></a></li>
      <li><a href="../java_ref/javamainpage.html"><span>ALox&#160;for&#160;Java</span></a></li>
      <li><a href="https://github.com/AlexWorx/ALox-Logging-Library"><span>Download</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="cppmainpage.html"><span>Overview</span></a></li>
      <li><a href="cpptutorial.html"><span>Tutorial</span></a></li>
      <li><a href="cppsetup.html"><span>IDE/Build&#160;system&#160;setup</span></a></li>
      <li><a href="cppprepro.html"><span>ALox&#160;Preprocessor&#160;Symbols</span></a></li>
      <li><a href="annotated.html"><span>Class&#160;Reference</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ALox and the C++ Preprocessor </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#cppprepro_1">1. Introduction</a><ul><li class="level2"><a href="#cppprepro_11">1.1. Structure of ALox Preprocessor Usage</a></li>
<li class="level2"><a href="#cppprepro_12">1.2. A-Worx Util Classes AWXU</a></li>
<li class="level2"><a href="#cppprepro_13">1.3. Reference Guide</a></li>
</ul>
</li>
<li class="level1"><a href="#cppprepro_compsymbols">2. Compilation Symbols</a></li>
<li class="level1"><a href="#cppprepro_3">3. Code Selection Symbols</a></li>
<li class="level1"><a href="#cppprepro_4">4. C++ Macros</a><ul><li class="level2"><a href="#cppprepro_41">4.1 Why Using Macros?</a></li>
<li class="level2"><a href="#cppprepro_42">4.2. ALox Macro Language</a></li>
<li class="level2"><a href="#cppprepro_43">4.3. ALox Low Level Macros</a></li>
<li class="level2"><a href="#cppprepro_44">4.4. AWXU Macros</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="cppprepro_1"></a>
1. Introduction</h1>
<h2><a class="anchor" id="cppprepro_11"></a>
1.1. Structure of ALox Preprocessor Usage</h2>
<p>The C/C++ preprocessor supports different tasks and different ways of symbol/macro definitions. This can lead to some confusion and hard to understand errors at compile time.</p>
<p>This is why ALox volunteers to adhere to a strict separation of preprocessor symbols and macros in respect to naming and documentation:<br />
</p><ol type="1">
<li><b>Compilation Symbols:</b> These are variables that can be passed to the compiler (usually using the -D option)</li>
<li><b>Code Selection Symbols:</b> These are preprocessor variables that are used for conditional compilation. Mostly their existence is derived from compilation symbols.</li>
<li><b>Macros:</b> Finally, we are calling those preprocessor symbols, that stand for (and get replaced by) a piece of C++ code a "macro". For some good reasons, a complete <em>API level</em> into ALox is provided based on macros and it is advised to use these macros for debug logging at least. For release logging, these macros might be beneficial, but there are reasons to choose the C++ based API instead.</li>
</ol>
<h2><a class="anchor" id="cppprepro_12"></a>
1.2. A-Worx Util Classes AWXU</h2>
<p>ALox for C++ uses a few classes that are not related to logging but are general purpose classes. On the one hand, design is loosely based on library classes of C# and Java and on the other, ALox for C# and Java provide similar utility classes. Together, this allows the code bases of all three ALox implementations to match wherever this seemed to be appropriate.</p>
<p>These classes reside in namespace <em><a class="el" href="namespaceaworx_1_1util.html">aworx::util</a></em> and are referred to as <em>A-Worx Util Classes</em> or in short <em>AWXU</em>.</p>
<p>To keep things simple, AWXU is not compiled into a separated library. It is included into ALox in source code and this way compiled into the ALox library itself. The only separation from ALox is is made from the fact that its sources reside in a separated source directory. AWXU sources neither refer to any ALox sources nor do they depend on ALox compilation symbols.</p>
<h2><a class="anchor" id="cppprepro_13"></a>
1.3. Reference Guide</h2>
<p>For a reference to all preprocessor symbols and macros discussed in the following sections, please see the corresponding symbol groups:</p><ol type="1">
<li>Compilation symbols<ul>
<li><a class="el" href="group__GrpALoxCompilerSymbols.html">ALox Compilation Symbols</a></li>
<li><a class="el" href="group__GrpAWXUCompilerSymbols.html">AWXU Compilation Symbols</a></li>
</ul>
</li>
<li>Code selection symbols<ul>
<li><a class="el" href="group__GrpALoxCodeSelectorSymbols.html">ALox Symbols To Select Code Fragments</a></li>
<li><a class="el" href="group__GrpAWXUCodeSelectorSymbols.html">AWXU Symbols To Select Code Fragments</a></li>
</ul>
</li>
<li>Macros<ul>
<li><a class="el" href="group__GrpMacrosDebugLog.html">ALox Macros For Debug Logging</a></li>
<li><a class="el" href="group__GrpMacrosReleaseLog.html">ALox Macros For Release Logging</a></li>
<li><a class="el" href="group__GrpALoxMacrosLowLevel.html">ALox Low level Macros</a></li>
<li><a class="el" href="group__GrpAWXUMacros.html">AWXU Macros</a></li>
</ul>
</li>
</ol>
<p><br />
 </p>
<h1><a class="anchor" id="cppprepro_compsymbols"></a>
2. Compilation Symbols</h1>
<p>As stated above, ALox volunteers to separate everything that is related to the C++ preprocessor into three different categories. This section is about symbols that can be passed to the compiler.</p>
<p><b>Naming</b><br />
 Many of the symbols are named using a postfix <em>_ON</em> or <em>_OFF</em> what indicates that they can be used to switch a code selection symbol (see next sections) which is named the same but excluding the postfix, on or off. As a sample, the <em>compilation symbols</em> <a class="el" href="group__GrpALoxCompilerSymbols.html#ga1d6b17b1dc814c44f312baf8d6f56688">ALOX_DBG_LOG_ON</a> and <a class="el" href="group__GrpALoxCompilerSymbols.html#gaf2de46ee4b30ee640266f7ac5de25bb9">ALOX_DBG_LOG_OFF</a> are controlling the definition of the <em>code selection symbol</em> <a class="el" href="group__GrpALoxCodeSelectorSymbols.html#ga2c6ba32fb7e34be7cee2100578b84a6e">ALOX_DBG_LOG</a>.</p>
<p><b>Avoiding library compilation problems</b><br />
 As with other C++ libraries, some of the compilation symbols change the interface and footprint ('sizeof()') of some of the classes. Consequently, linking a code unit that was compiled with different settings for one of these symbols, can fail. Even worse: in some cases, linking still works, but a process running these code units crashes unexpectedly. Such crashes are never easy to understand. So it is advised to be careful modifying compiler symbols and make sure that those symbols whose documentation hints to the fact that they change the footprint of the code, share the same value across all compilation units and the ALox library itself.<br />
 Two mechanisms to detect compilation setup problems exists. One is built in and automatically active. It is implemented and documented in method: <a class="el" href="classaworx_1_1lox_1_1Log.html#adf5526722711e47984a1b7fb93b219ce">Log::InitALox</a>.<br />
 The other can be used (e.g within bootstrapping code of source entities using ALox) to 'manually' verify the compilation settings of a specific compilation unit. To implement this, the macro <a class="el" href="group__GrpALoxMacrosLowLevel.html#ga79917c22fcdd24a934e5741790938253">ALOX_COMPILER_SYMBOL_SETTINGS</a> exist. The usage could look like that: </p><pre class="fragment">    ALOX_COMPILER_SYMBOL_SETTINGS
    cout &lt;&lt; "ALox compilation symbols: "    &lt;&lt; endl;
    cout &lt;&lt; acss.Buffer()  &lt;&lt; endl &lt;&lt; endl;
</pre><p><b>Default values</b><br />
 If no compilation symbols are given, appropriate default values are chosen by ALox headers. Some of these default values refer to the somehow standard symbols <em>NDEBUG</em>, <em>DEBUG</em> and <em>_DEBUG</em> used by other libraries. These default settings include:</p>
<ul>
<li>extra debug code is switched off.</li>
<li>multi threading support is switched on.</li>
<li>debug logging is switched on in debug builts and switched off in release builts.</li>
<li>debug logging caller information is switched on.</li>
<li>release logging is switched on.</li>
<li>release logging caller information is switched off.</li>
</ul>
<p><b>Reference guide:</b><br />
 The compilation symbols for ALox and AWXU are listed here:</p><ul>
<li><a class="el" href="group__GrpALoxCompilerSymbols.html">ALox Compilation Symbols</a></li>
<li><a class="el" href="group__GrpAWXUCompilerSymbols.html">AWXU Compilation Symbols</a></li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="cppprepro_3"></a>
3. Code Selection Symbols</h1>
<p>These symbols are mostly derived (by the ALox header files) from the <a class="el" href="group__GrpALoxCompilerSymbols.html">ALox Compilation Symbols</a> discussed in the previous section and, their naming oftenly corresponds to these, excluding the postfix <em>_ON</em> and <em>_OFF</em>.</p>
<p>These symbols must not be passed to the compiler and must not be set manually from within code entities that use ALox libraries. They can be used in code entities that use ALox to select code depending on the same settings of the ALox library compilation. (Besides ALox specific symbols of that type, of-course, also platform specific symbols are used to select code, e.g. "__GNUC__", "__GLIBCXX__", "_MSC_VER", etc.).</p>
<p>Code selection symbols could be used to implement ALox logging using pairs of </p><pre class="fragment">#ifdef ALOX_XYZ_SYMBOL
#endif
</pre><p> lines.</p>
<p>While they are useful to implement rather large extra code blocks which are only used if certain logging is enabled, in general it is not recommended to use this mechanism for each and every log statement. Instead, it is recommended to use the ALox macros discussed in the next section.</p>
<p>ALox itself uses these symbols to enable the compilation of specific versions of the library and to conditionally select the definition of the ALox macros.</p>
<p>For a complete reference, please refer to <a class="el" href="group__GrpALoxCodeSelectorSymbols.html">ALox Symbols To Select Code Fragments</a>. </p>
<p><br />
 </p>
<h1><a class="anchor" id="cppprepro_4"></a>
4. C++ Macros</h1>
<h2><a class="anchor" id="cppprepro_41"></a>
4.1 Why Using Macros?</h2>
<p>ALox for C++ makes extensive use of preprocessor macros. Why is this? Aren't preprocessor macros error-prone and in general not adequate for modern C++ programming style? Well, in general yes. But there are two main reasons why the decision was taken to build the highest interface level into the ALox library on macros:</p>
<ul>
<li><b>Pruning of debug log code</b><br />
 For removing all logging invocations that are placed to support the analysis of the code while developing the application, a special macro <a class="el" href="group__GrpMacrosDebugLog.html#ga8624e4653c1897d3c9e7c4ae4350063d">Log_Prune</a>, that encloses all macros used for debug logging is set empty. While pruning could also be achieved in different ways, e.g. using compiler optimization techniques, the use of the preprocessor is reliable across compilers and platforms. </li>
</ul>
<ul>
<li><b>Adding caller information</b><br />
 ALox uses built-in standard preprocessor symbols like "__FILE__" and "__LINE__" to provide information about the position of logging statement within the source. Hiding these needed symbols within ALox specific macros, reliefs the sources that use ALox from a lot of overhead.</li>
</ul>
<p>We think, from the fact that source code editors which color C++ macros specifically, a next small benefit is seen when looking at the source code: Alike colored comment lines, all log lines shine in their own preprocessor color.</p>
<h2><a class="anchor" id="cppprepro_42"></a>
4.2. ALox Macro Language</h2>
<p>ALox provides a complete set of macros designed to incorporate debug and release logging statements into software using ALox. Maybe the term "macro language" is overstating a little what it is, but what this name wants to imply is that<br />
 a) it is recommended to implement ALox logging in C++ sources by using these macros exclusively and <br />
 b) that these macros are comprising a higher abstraction level of the ALox API itself.</p>
<p>A "higher level" means, that the ALox classes do not "know" or use these macros as the classes reside on a lower API level.</p>
<p>This is a difference to other versions of ALox (ALox for C#, ALox for Java). The reasons for relying on macros in the C++ version were already mentioned above. By providing not only a set of macros to implement debug logging, but also one for release logging, one of the differences to other ALox implementations is, that ALox for C++ allows to prune release logging from the code separated from pruning debug logging.</p>
<dl class="section note"><dt>Note</dt><dd>In ALox for C# and ALox for Java, the pruning of release logging statements is not supported by default (users can implement this still if applying certain rules). What is supported in all ALox implementations however, is of-course to disable release logging statements at runtime.<br />
 It might be important to understand the difference: When release logging is disabled, the code for release logging still remains in the binaries, which has an impact on their size and (a marginal) impact on their speed. In addition it is possibility to reverse engineer such binaries and learn about internals of the software when somebody is doing so.<br />
 In this respect, ALox for C++ is the most flexible implementation of ALox, which is rising from the fact of using the C++ preprocessor.</dd></dl>
<p>The macros and their documentation are divided into two different groups:<br />
</p><ul>
<li><a class="el" href="group__GrpMacrosDebugLog.html">ALox Macros For Debug Logging</a></li>
<li><a class="el" href="group__GrpMacrosReleaseLog.html">ALox Macros For Release Logging</a></li>
</ul>
<p>While all macros for debug logging start with the prefix <em>Log_</em>, those for release logging are using the prefix <em>Lox_</em>. Otherwise, their naming and parameters are the same. The rest of the macro names in most cases corresponds to methods found in class <a class="el" href="classaworx_1_1lox_1_1Lox.html">aworx::lox::Lox</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This naming convention provides maximum source compatibility to ALox for C# and Alox for Java, in which debug logging and its pruning is performed using a "mirror" class of class Lox, which is called Log.</dd></dl>
<p>Both sets include the <code><a class="el" href="group__GrpMacrosDebugLog.html#ga8624e4653c1897d3c9e7c4ae4350063d">Log_Prune()</a></code>, respectively <code><a class="el" href="group__GrpMacrosReleaseLog.html#ga04158d8131eba14e98f93e433b6325d2">Lox_Prune()</a></code> macro. All that these two macros do is pruning the code that is passed to them in the moment that debug logging (respectively release logging) is supposed to be pruned.</p>
<p>For an introduction of how to use these macros, see <a class="el" href="cpptutorial.html">ALox for C++ Tutorial</a>.<br />
 For a complete list, refer to</p><ul>
<li><a class="el" href="group__GrpMacrosDebugLog.html">ALox Macros For Debug Logging</a> and</li>
<li><a class="el" href="group__GrpMacrosReleaseLog.html">ALox Macros For Release Logging</a>.</li>
</ul>
<p><br />
 </p>
<h2><a class="anchor" id="cppprepro_43"></a>
4.3. ALox Low Level Macros</h2>
<p>The two sets of ALox macros for debug and release logging that where introduced in the previous chapter, rely on a small set of low level macros. While these macros are not deemed to be used directly, using or even manipulating them might be another way for expert users to tweak ALox.</p>
<p>The macros are listed and documented here: <a class="el" href="group__GrpALoxMacrosLowLevel.html">ALox Low level Macros</a>.</p>
<p>For developers who are interested in manipulating them, please refer to the source code of ALox to get an understanding on how such manipulation would influence the existing <a class="el" href="group__GrpMacrosDebugLog.html">ALox Macros For Debug Logging</a> and <a class="el" href="group__GrpMacrosReleaseLog.html">ALox Macros For Release Logging</a>, and also how to build your own macros upon them.</p>
<h2><a class="anchor" id="cppprepro_44"></a>
4.4. AWXU Macros</h2>
<p>As mentioned allready, the ALox class library includes some utility classes, packaged into AWXU. There are also a few macros available that are provided by AWXU. These are not related to logging but might be useful in general.</p>
<p>For people who are interested in and may want to use these macros within projects that use ALox anyhow, the documentation is found here: <a class="el" href="group__GrpAWXUMacros.html">AWXU Macros</a>. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
