<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ALox: T_EnumIsBitwise&lt; TEnum, TCheckEnum &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALox
   &#160;<span id="projectnumber">V. 1712 R. 0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!--ALox Main Menu-->
<div style="background: #2f3a48; " >
<table  class="aworx-menutable"  >
 <tbody>
 <tr style="height: 36px;">
  <td> <a class="aworx-menu"    href="../index.html"                                   >Home</a>                     </td>
  <td> <a class="aworx-menu_hl" href="../cpp_ref/alox_cpp_mainpage.html"                >ALox for C++</a>             </td>
  <td> <a class="aworx-menu"    href="../cs_ref/alox_cs_mainpage.html"                  >ALox for C#</a>              </td>
  <td> <a class="aworx-menu"    href="../java_ref/alox_java_mainpage.html"              >ALox for Java</a>            </td>
  <td> <a class="aworx-menu"    href="https://github.com/AlexWorx/ALox-Logging-Library">Download</a></td>
 </tr>
 </tbody>
</table>
</div>
<!--end ALox Main Menu-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceaworx.html">aworx</a></li><li class="navelem"><a class="el" href="namespaceaworx_1_1lib.html">lib</a></li><li class="navelem"><a class="el" href="namespaceaworx_1_1lib_1_1lang.html">lang</a></li><li class="navelem"><a class="el" href="structaworx_1_1lib_1_1lang_1_1T__EnumIsBitwise.html">T_EnumIsBitwise</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">T_EnumIsBitwise&lt; TEnum, TCheckEnum &gt; Struct Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="enumbitwise_8hpp_source.html">enumbitwise.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for T_EnumIsBitwise&lt; TEnum, TCheckEnum &gt;:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="structaworx_1_1lib_1_1lang_1_1T__EnumIsBitwise__inherit__graph.svg" width="280" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for T_EnumIsBitwise&lt; TEnum, TCheckEnum &gt;:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="structaworx_1_1lib_1_1lang_1_1T__EnumIsBitwise__coll__graph.svg" width="280" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<a name="details" id="details"></a><h2 class="groupheader">Class Description</h2>
<div class="textblock"><h3>template&lt;typename TEnum, typename TCheckEnum = typename std::enable_if&lt;std::is_enum&lt;TEnum&gt;::value&gt;::type&gt;<br />
struct aworx::lib::lang::T_EnumIsBitwise&lt; TEnum, TCheckEnum &gt;</h3>

<h1>Introduction</h1>
<p>With scoped enums, introduced by C++ 11, logical operators are not supported. This seems a little in contradiction as still enums can be defined bitwise. What we mean with the term "bitwise" is that the elements of enums get numbers assigned which each have set a different bit in the underlying integer type.</p>
<p>As a sample, consider the following two scoped enum types:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>MyNamespace</div><div class="line">{</div><div class="line">    <span class="keyword">enum class</span> Fruits</div><div class="line">    {</div><div class="line">        Apple,</div><div class="line">        Orange,</div><div class="line">        Banana,</div><div class="line">    };</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group__GrpALibMacros.html#ga6915abca60042daca351cff2906671ae">ALIB_LANG_ENUM_NAMED</a>( MyNamespace::Fruits )</div></div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">namespace </span>WindowManager</div><div class="line">{</div><div class="line">    <span class="keyword">enum class</span> States</div><div class="line">    {</div><div class="line">        HorizontallyMaximized  = (1 &lt;&lt; 0),</div><div class="line">        VerticallyMaximized    = (1 &lt;&lt; 1),</div><div class="line">        Hidden                 = (1 &lt;&lt; 2),</div><div class="line">    };</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group__GrpALibMacros.html#ga6915abca60042daca351cff2906671ae">ALIB_LANG_ENUM_NAMED</a>( WindowManager::States )</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The first enum is taken from the sample found in documentation of TMP struct <a class="el" href="structaworx_1_1lib_1_1lang_1_1T__EnumMetaDataDecl.html">T_EnumMetaDataDecl</a>. We have applied macro <a class="el" href="group__GrpALibMacros.html#ga6915abca60042daca351cff2906671ae">ALIB_LANG_ENUM_NAMED</a> also to the second, bitwise enum type. For further information refer to <a class="el" href="structaworx_1_1lib_1_1lang_1_1T__EnumMetaDataDecl.html">ALib Enum Meta Information</a> and below.</dd></dl>
<p>The second enum type obviously is bitwise. And as the identifier indicates that values of this enum represent "states of windows of a window manager", it is obvious that enum values with multiple bits set might occur. Nevertheless, the following code</p>
<div class="fragment"><div class="line">States maximized= States::HorizontallyMaximized | States::VerticallyMaximized;</div></div><!-- fragment --><p> leads to a compilation error similar to this: </p><pre class="fragment"> error: invalid operands to binary expression ('WindowManager::States' and 'WindowManager::States')
</pre><p>Therefore, if operators are needed, the common approaches are to either</p><ul>
<li>define operators for each scoped enum type that need them, or to</li>
<li>provide a set of templated operator functions that handle all scoped enum types.</li>
</ul>
<p>The first approach includes a lot of duplicate code, the second has the disadvantage that it undermines the intention of the C++ 11 language standard: The compiler would allow the operators even non-bitfield custom scoped enum types.</p>
<h1>ALib Bitwise Enum Operators</h1>
<p>This extremely simple TMP struct is used to overcome the disadvantages of the approaches discussed above. The default implementation is empty and just inherits from <code>std::false_type</code>.</p>
<p>Specializations of the struct for a certain enum type should be performed using macro <a class="el" href="group__GrpALibMacros.html#ga351cc6b784bc731b56e2d721ad1b094d">ALIB_LANG_ENUM_IS_BITWISE</a>. The macro needs to be located in a header file, probably close to the enum type declaration itself, but <b>outside</b> of any namespace (aka in the default namespace). In our sample, we simply put the code line:</p>
<div class="fragment"><div class="line"><a class="code" href="group__GrpALibMacros.html#ga351cc6b784bc731b56e2d721ad1b094d">ALIB_LANG_ENUM_IS_BITWISE</a>( WindowManager::States )</div></div><!-- fragment --><p> at the end of the header file (again: outside of the namespace!). All that the macro does, is specializing this struct to inherit from <code>std::true_type</code>. (With the current version of <b>ALib</b>, still the struct is empty.)</p>
<p>With this specialization, the compiler accepts a set of templated operator functions which get conditionally selected using TMP struct <code>std::enable_if</code> which of-course checks for this struct to be specialized for the type in question.</p>
<p>The following code snippet now compiles:</p>
<div class="fragment"><div class="line"><span class="comment">// Now allowed:</span></div><div class="line">States maximized= States::HorizontallyMaximized | States::VerticallyMaximized;</div><div class="line"></div><div class="line"><span class="comment">// Still not allowed: compiler error &quot;invalid operands to binary expression&quot;</span></div><div class="line"><span class="comment">//Fruits fruit= Fruits::Apple | MyNamespace::Fruits::Orange;</span></div></div><!-- fragment --><p> The following <b>ALib</b> set of operators are applicable to scoped enumerations of bitwise type:</p>
<ul>
<li><b>operator&amp;</b> (Link to documentation of ampersand operator currently impossible for technical reasons.)</li>
<li><b>operator&amp;=</b> </li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#afce7a398d6d214cd36c3a28a2d868519">operator|</a></li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a17407b3624b5cc4be4476378d4193082">operator|=</a></li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a5b389332b4d0d5ed1f7118f173685d0e">operator^</a></li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#ae596498f62f2978ab6cdcb97d61cfc83">operator^=</a></li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#ab0d1471f39a2064b7495ed403c43e247">operator~</a></li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a9b25f4952e506a7a23659009e64d3787">operator+</a> (An alias for <a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a17407b3624b5cc4be4476378d4193082">operator|=</a>)</li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a36dbf1c0dea06c0523493060c2be305c">operator-</a> (Removes bits of rhs in lhs)</li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#ac3ce792ab1cdcb6a782c8d32e041f718">operator+=</a> (An alias for <a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a17407b3624b5cc4be4476378d4193082">operator|=</a>)</li>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a751225eb2bd89d126ba103c5373e79fc">operator-=</a> (Removes given bit(s) )</li>
</ul>
<p>In addition, helper function</p><ul>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a2fd18b7e35e747c3e86275c57311cb1b">EnumContains</a></li>
</ul>
<p>is available.</p>
<p>Independent from this TMP struct, for all C++ scoped enum type, in addition, helper function</p><ul>
<li><a class="el" href="namespaceaworx_1_1lib_1_1lang.html#a84494f1a492417b7b96bb8dfcd9c4c02">EnumValue</a></li>
</ul>
<p>is provided with including this header file.</p>
<dl class="section attention"><dt>Attention</dt><dd>While in this documentation the operators are appearing under namespace <code><a class="el" href="namespaceaworx_1_1lib_1_1lang.html">aworx::lib::lang</a></code> , in reality they are defined in <b>no namespace</b> (global namespace). This was done to have the documentation of the operator functions and this struct just in one place! </dd>
<dd>
Due to the template meta programming, this does not ’clutter' the global namespace and does not interfere with any existing user code, while still there is the advantage of not needing to put a using statement like <pre class="fragment">   using namespace aworx::lib::lang;
</pre> to each source location that use the operators.</dd></dl>
<h1>Bitwise Enums and ALib Enum Meta Data</h1>
<p>This concept of supporting bitwise operations on selected types, goes very well along with the <a class="el" href="structaworx_1_1lib_1_1lang_1_1T__EnumMetaDataDecl.html">ALib Enum Meta Information</a> features. However the use of a "element to enum identifier name translation table" as described and sampled in this context, needs a little more thinking. Because bitwise enum values might consist of mixed elements, the simple approach to find just one corresponding meta data table entry for converting an enum element into a string representation fails. In contrast, probably more than one element has to be written or combinations of bits set as once, should even lead to new words, not defined in the enum class itself (e.g. "Maximized" in the sample above).</p>
<p>Therefore, <b>ALib</b> provides two different specializations of TMP struct <a class="el" href="structaworx_1_1lib_1_1strings_1_1T__Apply.html">T_Apply</a>, namely</p><ul>
<li><a class="el" href="structaworx_1_1lib_1_1strings_1_1applyto_1_1T__Apply_3_01TEnum_01_4.html">T_Apply&lt;TEnum&gt;</a> for applying non-bitwise enum types to <b>AStrings</b>.</li>
<li><a class="el" href="structaworx_1_1lib_1_1strings_1_1applyto_1_1T__Apply_3_01TEnumBitwise_01_4.html">T_Apply&lt;TEnumBitwise&gt;</a> for applying bitwise enum types to <b>AStrings</b>.</li>
</ul>
<p>Again, they are selected by the compiler automatically dependent on the availability of a specialization of this struct <b>T_EnumIsBitwise</b>, using <code>std::enable_if</code>. That is good news, of-course, but when defining the "translation table", some special rules (and options!) have to_be kept in mind. Those are discussed and sampled with documentation of <a class="el" href="structaworx_1_1lib_1_1strings_1_1applyto_1_1T__Apply_3_01TEnumBitwise_01_4.html">T_Apply&lt;TEnumBitwise&gt;</a>.</p>
<h1>Reference Documentation</h1>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">TEnum</td><td>The enum type to provide information for. </td></tr>
    <tr><td class="paramname">TCheckEnum</td><td>This parameter has a default expressions and <b>must not</b> be provided with specializations of this struct. It is used internally to ensure that only enum types are to be used with the first template parameter <code>TEnum</code>. </td></tr>
  </table>
  </dd>
</dl>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="enumbitwise_8hpp_source.html">enumbitwise.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 22 2017 22:23:15 for ALox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
<!-- Start of StatCounter Code e -->
<script type="text/javascript">
var sc_project=11242602;
var sc_invisible=1;
var sc_security="5ac13373";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web statistics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11242602/0/5ac13373/1/" alt="web
statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>
