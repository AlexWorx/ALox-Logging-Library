<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ALox: ALox for C++ Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!-- so strange, that doxgen does not highlight each menu item. Just some... -->
<script>
  $(document).ready(function() {     
    fnameStart= window.location.href.lastIndexOf('/')
    fnameEnd=   window.location.href.indexOf('_', fnameStart )
    if( fnameEnd < 0 ) {
        fnameEnd=   window.location.href.indexOf('.', fnameStart )
    }
    if( fnameEnd > -1 ) {
        subString= window.location.href.substring( fnameStart, fnameEnd )
        $('li').toArray().forEach(function(li){
            if(     typeof li.firstChild.href != 'undefined'
                &&  li.firstChild.href.indexOf(subString) > 0 
                ){
               li.classList.add('current');
            }
        });
    }
  });
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALox
   &#160;<span id="projectnumber">V. 1602</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../index.html"><span>ALox&#160;Home</span></a></li>
      <li><a href="../faq.html"><span>FAQ</span></a></li>
      <li><a href="../manual.html"><span>Manual</span></a></li>
      <li class="current"><a href="cppmainpage.html"><span>ALox&#160;for&#160;C++</span></a></li>
      <li><a href="../cs_ref/csmainpage.html"><span>ALox&#160;for&#160;C#</span></a></li>
      <li><a href="../java_ref/javamainpage.html"><span>ALox&#160;for&#160;Java</span></a></li>
      <li><a href="../tools.html"><span>Tools</span></a></li>
      <li><a href="https://github.com/AlexWorx/ALox-Logging-Library"><span>Download</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="cppmainpage.html"><span>Overview</span></a></li>
      <li><a href="cpptutorial.html"><span>Tutorial</span></a></li>
      <li><a href="cppsetup.html"><span>IDE/Build&#160;system&#160;setup</span></a></li>
      <li><a href="cppprepro.html"><span>ALox&#160;Preprocessor&#160;Symbols</span></a></li>
      <li><a href="annotated.html"><span>Class&#160;Reference</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ALox for C++ Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#tutcpp_hello_alox">1. Hello ALox</a></li>
<li class="level1"><a href="#tutcpp_adding_ALox">2. Adding ALox to a Project</a><ul><li class="level2"><a href="#tutcpp_createproject">2.1 Create a tutorial project or equip your current project with ALox</a></li>
<li class="level2"><a href="#tutcpp_ha1">2.2. Create an instance of class &quot;Logger&quot;</a></li>
<li class="level2"><a href="#tutcpp_ha_3">2.3. Add code to create and set a &quot;Log Domain&quot;</a></li>
<li class="level2"><a href="#tutcpp_ha_4">2.4. Add log code</a></li>
<li class="level2"><a href="#tutcpp_ha_5">2.5. Run your application within your IDE</a></li>
<li class="level2"><a href="#tutcpp_ha_6">2.6. Build a release version</a></li>
</ul>
</li>
<li class="level1"><a href="#tutcpp_llld">3. Log levels and log domains</a><ul><li class="level2"><a href="#tutcpp_llld_1">3.1. Log code with different log levels</a></li>
<li class="level2"><a href="#tutcpp_llld_2">3.2. Default domains</a></li>
<li class="level2"><a href="#tutcpp_llld_3">3.3. Where to place ALox log code</a></li>
</ul>
</li>
<li class="level1"><a href="#tutcpp_more">4. Some more Details</a><ul><li class="level2"><a href="#tutcpp_more_1">4.1 Stop reading here?</a></li>
<li class="level2"><a href="#tutcpp_more_astring">4.2 Using StringNN to create your log messages</a></li>
<li class="level2"><a href="#tutcpp_more_conditional">4.3 Conditional logging</a></li>
<li class="level2"><a href="#tutcpp_more_logtools">4.4 LogTools: Log complex things easily</a></li>
<li class="level2"><a href="#tutcpp_more_seplog">4.5 Directing log output to distinct loggers</a></li>
<li class="level2"><a href="#tutcpp_more_config">4.6 ALox configuration and internal log messages</a></li>
<li class="level2"><a href="#tutcpp_more_indentation">4.7 Indentation</a></li>
</ul>
</li>
<li class="level1"><a href="#tutcpp_end">Further reading</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="tutcpp_hello_alox"></a>
1. Hello ALox</h1>
<p>Welcome to the ALox for C++ tutorial! This tutorial aims to introduce you to ALox as quickly as possible and put you into a position to decide whether ALox is the right logging library for you.</p>
<p>Let us start with the very quick "hello world" sample:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="alox_8hpp.html">alox/alox.hpp</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> HelloALox()</div><div class="line">{</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;Hello ALox!&quot;</span> );</div><div class="line">}</div></div><!-- fragment --><p> When this method gets invoked, the output should look similar to this </p><pre class="fragment">    myproject/mysourcefile.cpp/(5):HelloALox() [00:00.000 +152 µs] [MAIN] [NULL] (001): Hello ALox
</pre><p>So, with one line of code we get a log statement that incorporates:</p><ul>
<li>The source file, line number and method, which - depending on the IDE you use - is 'clickable' which means a click in the output window opens the source file and highlights the line where the log statement sits.</li>
<li>The time that was passed since the process started (here 00:00.000 which means below a millisecond)</li>
<li>The time that passed since the last log line: 152 microseconds. This information is handy for a first impression on the execution speed of your methods.</li>
<li>The name of the thread executing the log (automatically identified as the main thread in this case)</li>
<li>NULL: to be explained later...</li>
<li>The log counter (001), which e.g. is useful to quickly find the right output lines in your next debug-run.</li>
<li>Finally the log message itself.</li>
</ul>
<p>And: In the release build of your software, this line of code is completely pruned away. Also, in debug versions you can disable them selectively, not only by their level, but also ... well, this is where above "NULL" comes in..., let's forget this for a moment. What we want to say here: you can keep your debug log statements in your code forever!</p>
<p>Well, if you think this is nice, continue reading. There is a lot more to come. But we have to go into some details first. That's why we quickly start a new chapter of this tutorial where we then take a slower walk...</p>
<h1><a class="anchor" id="tutcpp_adding_ALox"></a>
2. Adding ALox to a Project</h1>
<p>The previous chapter was a teaser. We showed the shortest possible sample program which does not 'bootstrap' ALox (aka initialize and configure). This is detected and hence ALox tries to setup itself with reasonable default options.</p>
<p>ALox has some concepts that need a little more time to understand. Before we see more code, we have to take some prerequisites.</p>
<p>ALox is designed to support <b>debug logging</b> (log output that should appear only in the debug version of your software) as well as <b>release logging</b>. In C++ such pruning is done using preprocessor macros. Therefore, you will see a lot of macros in the code samples given here. We want you to understand a little of the class design of ALox, while you are reading yourself through this tutorial. This is why a very brief explanation of the macros is given here:</p>
<ul>
<li>The most important interface into ALox is class <a class="el" href="classaworx_1_1lox_1_1Lox.html">Lox</a> which is is a container to hold one or more instances of abstract class <a class="el" href="classaworx_1_1lox_1_1core_1_1Logger.html">Logger</a>. Through the interface of class <b>Lox</b>, the log statements are invoked. Log statements are forwarded to the loggers attached.</li>
<li>The most simple case is that you have just one <b>Lox</b> instance, holding exactly one <b>Logger</b> which logs its output to the standard output stream of your process (e.g. <a class="el" href="classaworx_1_1lox_1_1loggers_1_1AnsiConsoleLogger.html">AnsiConsoleLogger</a>). ALox supports much more complex scenarios and the preprocessor macros must support this as well.<br />
 In this tutorial we stick to the simple case, maybe adding a second logger here and there.</li>
<li>Most of the macros that we are using here have the form "Log_Xyz()". What these macros are doing is basically two things:</li>
<li>Invoke the method Xyz() on a predefined singleton of class <em>Lox</em>. This predefined singleton is the default (configurable) container for all debug logging output. Macros of this type will be pruned in release compilations of your software.</li>
<li>Pass caller information to the ALox, so that the file name, line number and method name of the occurrence of a log statement can be included in the log output So, when you see the line</li>
</ul>
<p>Log_Info( "Hello ALox" )</p>
<p>This means that method <a class="el" href="classaworx_1_1lox_1_1Lox.html#ad52f89dd7d537db1a1bf70eb5b1c9ae0">Info</a> is invoked on the predefined singleton of class <b>Lox</b> which is by default used for debug logging.</p>
<ul>
<li>In addition to the macros that actually perform a log statement or otherwise interface with class <b>Lox</b>, macro <a class="el" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a> exists, which in the release version of your software, removes any code it gets passed. This macro is needed for things that do not represent single invocation of methods of class <em>Lox</em>, e.g.:</li>
<li>creation and manipulation of loggers</li>
<li>changing log output format</li>
<li>code to assemble more complex log messages prior to logging them</li>
</ul>
<p>In the tutorial language we do not further explain these macros. So do not be surprised when the presented sample code shows a macro, while the explaining text refers to the method invocations that are represented by these macros. For a full introduction into the macro language of ALox, please refer to <a class="el" href="cppprepro.html#cppprepro_macros">C++ Macros</a>.</p>
<h2><a class="anchor" id="tutcpp_createproject"></a>
2.1 Create a tutorial project or equip your current project with ALox</h2>
<p>If you want to follow the tutorial samples and play around with it a little, you should either create a tutorial project or right away equip your current project with ALox. For information about how you do that see: <a class="el" href="cppsetup.html">IDE/Build system Setup</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Of-course, you can easily skip this step and just continue <em>reading</em> the tutorial without setting up ALox now. For some IDEs, there might be a <a class="el" href="cppsetup.html">ready to use solution</a> available that minimizes efforts when you want to follow the samples and play around a little.</dd></dl>
<p>To include all headers necessary for this tutorial, add the following statements to your source file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="alox__console__loggers_8hpp.html">alox/alox_console_loggers.hpp</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="memorylogger_8hpp.html">alox/loggers/memorylogger.hpp</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="std__iostream_8hpp.html">alib/compatibility/std_iostream.hpp</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="std__string_8hpp.html">alib/compatibility/std_string.hpp</a>&quot;</span></div></div><!-- fragment --><p> And below that, let's add a bunch of using statements to your source file:</p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceaworx.html">aworx</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceaworx_1_1lib.html">aworx::lib</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceaworx_1_1lib_1_1enums.html">aworx::lib::enums</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceaworx_1_1lox.html">aworx::lox</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceaworx_1_1lox_1_1loggers.html">aworx::lox::loggers</a>;</div></div><!-- fragment --><h2><a class="anchor" id="tutcpp_ha1"></a>
2.2. Create an instance of class "Logger"</h2>
<p>For initializing ALox, e.g. the creation your loggers, you need to identify the right place in your application. This could be the "main()" method or any other place where some "bootstrapping" of your application takes place. Add the following line:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div></div><!-- fragment --><p> This tries to identify the best logger type that fits to your console type. E.g. If the process runs on an ANSI enabled console or a console window on Windows OS, colorful log output is enabled. Sometimes, this method even creates two loggers: one for the console and one for your IDE output, when ALox is able to detect and support such IDE.<br />
 For information about what is currently supported and how (with environment variables, configuration files or command line parameters) this behavior can be changed, see methods <a class="el" href="classaworx_1_1lox_1_1Log.html#af6d116f9dcb6f677378a8f4b58edb94c">Log::AddDebugLogger</a> and <a class="el" href="classaworx_1_1lox_1_1Lox.html#ae92c4ae884c3cd723deb9b5e8d27b6ac">Lox::CreateConsoleLogger</a> which this macro invokes.</p>
<p>We never interface with a <code>Logger</code> directly. After it is created and added to the <code>Lox</code>, we can mostly forget about it. For almost all the rest of this introductory tutorial, all you need to know is that loggers created with this method, write log messages in textual format e.g. to standard output stream (and/or to the application console). As you might guess, other Loggers could be added in parallel that use other "drains" to write the output to, e.g. files, the Internet, etc.</p>
<h2><a class="anchor" id="tutcpp_ha_3"></a>
2.3. Add code to create and set a "Log Domain"</h2>
<p>Now, we add a second line of code:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;APP&quot;</span>, Log::DomainLevel::InfoWarningsAndErrors );</div></div><!-- fragment --><p>This tells ALox about a <em>log domain</em> called "APP" and assigns the <em>log domain level</em> INFO_WARNINGS_AND_ERRORS to it. If you did not understand too much of the last sentence, don't worry, the concepts of <em>log domains</em> and <em>log levels</em> will get very obvious to you in 5 minutes.</p>
<h2><a class="anchor" id="tutcpp_ha_4"></a>
2.4. Add log code</h2>
<p>Next, we add a third line of code:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;Hello ALox&quot;</span> );</div></div><!-- fragment --><p> This is now your first log output! The four lines of code you inserted into your application (besides the "#include" and "using namespace" statements) should look like this:</p>
<div class="fragment"><div class="line"></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;APP&quot;</span>, Log::DomainLevel::InfoWarningsAndErrors );</div><div class="line"></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;Hello ALox&quot;</span> );</div><div class="line"></div></div><!-- fragment --><h2><a class="anchor" id="tutcpp_ha_5"></a>
2.5. Run your application within your IDE</h2>
<p>Run your application. In the output window of your IDE (or at the console) you should see a line similar to this:</p>
<pre class="fragment">src.cpp/alox.unittests/ut_alox_tutorial.cpp(85):TestBody() [00:00.000 +047 µs] [UnitTest]       [APP] (001): Hello ALox</pre><p>Now, if your using an IDE supported by ALox (e.g. Visual Studio in Windows), you can double click the log line in the output window. The IDE opens the source and selects the line of code where the log call was invoked. This means, each log statement is "clickable" in your IDE and links to its source code line in the editor. This is a tremendous help for developers when debugging their code.</p>
<p>Besides the fact that you can click it, users of ALox are saving even more time. Developers, when using standard "debug print lines", often phrase textual info like: </p><pre class="fragment">    "attn: dbman.savedata(): oops could not store data....ERROR!"
</pre><p>hence, putting some info about the place in the code, where they have put the debug statements. As you see from the ALox output above, information about the <em>caller</em> of the log statement is all included automatically. Advantages are:</p>
<ul>
<li>lines are clickable and link to the editor (as mentioned above)</li>
<li>less to type when adding debug print lines</li>
<li>no need to change the log statement when you copy/paste a debug print line to a different class/method or when you rename your class/method</li>
</ul>
<p>Furthermore, as we will see later, the log message type (which seems to be "ERROR!" in the phrase above) is standardized in ALox and does not need to be phrased in your message text.</p>
<p>Besides caller information and message type, you automatically get:</p>
<ul>
<li>the relative time of the log execution (time since application started)</li>
<li>the time elapsed since the last log</li>
<li>the ID of the thread that executed the method</li>
<li>the <em>log domain</em> of your log statement</li>
</ul>
<p>The output format and detail of the log line is configurable in ALox. The line above just shows the default. Details you see can be removed or other details can be added (e.g. the absolute date / time instead of only the relative).</p>
<dl class="section note"><dt>Note</dt><dd>Should your IDE not be supported by ALox in respect to generate "clickable log output lines" (aka lines that link automatically to the right point in your source code) it might be the case that only by adjusting the log output format a little, your IDE learns how to read and interpret ALox logging! </dd></dl>
<dl class="section note"><dt>Note</dt><dd>You should adjust your IDE in a way that the output window spans over the complete width of the main window. Also, depending on your screen size, you might decrease the font size of the output window a little. The output gets wide, because a lot of valuable information is logged besides the log message. In addition, the output is organized in columns that auto adjust their size. This takes a wider output into account for the benefit of largely improved readability.</dd></dl>
<h2><a class="anchor" id="tutcpp_ha_6"></a>
2.6. Build a release version</h2>
<p>Switch your project configuration to "Release" and run the application. The output should not appear!</p>
<p>Even better: The three lines of code are not even compiled into the release target. So, whatever you are logging out during developing and debugging your software, it is all automatically gone in the release version.</p>
<p>This is achieved by providing the right set of <a class="el" href="cppprepro.html#cppprepro_compsymbols">Compilation Symbols</a> when <a class="el" href="cppsetup.html">setting up the project</a>. Only project configurations that have the symbol <b>ALOX_DBG_LOG_ON</b> set will contain ALox debug logging statements.</p>
<p>This has a lot of benefits:</p><ul>
<li>your release code executes faster,</li>
<li>your release executable gets a smaller footprint and</li>
<li>you are not delivering your debug language to the end user (not even if your executable is reverse engineered).</li>
</ul>
<h1><a class="anchor" id="tutcpp_llld"></a>
3. Log levels and log domains</h1>
<h2><a class="anchor" id="tutcpp_llld_1"></a>
3.1. Log code with different log levels</h2>
<p>The code above uses the method <a class="el" href="classaworx_1_1lox_1_1Lox.html#ad52f89dd7d537db1a1bf70eb5b1c9ae0">Lox::Info()</a> (embedded in a preprocessor macro) to create the log output. There are three other Versions of that method, together constituting the four "log levels":</p>
<ul>
<li><a class="el" href="classaworx_1_1lox_1_1Lox.html#a3dab1b8384cf49f26424e34436c5b744">Lox::Error()</a></li>
<li><a class="el" href="classaworx_1_1lox_1_1Lox.html#ab00a8f8c882ff229ed5ff26ab1f5633d">Lox::Warning()</a></li>
<li><a class="el" href="classaworx_1_1lox_1_1Lox.html#ad52f89dd7d537db1a1bf70eb5b1c9ae0">Lox::Info()</a></li>
<li><a class="el" href="classaworx_1_1lox_1_1Lox.html#af6093dbce9dbbeffcf76362b4abacac8">Lox::Verbose()</a></li>
</ul>
<p>Each of the methods accepts the <em>log domain</em> ( in our sample "App") and the log message as input parameters. Internally all four methods differ only by using a different <em>log level</em>. The tricky thing that needs to be understood is that such <em>log level</em> is compared with the <em>log domain level</em> that the domain currently holds.</p>
<p>In our sample codes' third line:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;APP&quot;</span>, Log::DomainLevel::InfoWarningsAndErrors );</div></div><!-- fragment --><p> we have assigned <a class="el" href="classaworx_1_1lox_1_1Log.html#a10ac165398697ce1d642d739cc3b170f">Log::DomainLevel::INFO_WARNINGS_AND_ERRORS</a> to the domain "APP". The possible domain log levels are:</p>
<ul>
<li><a class="el" href="classaworx_1_1lox_1_1Log.html#a10ac165398697ce1d642d739cc3b170f">Log::DomainLevel::OFF </a></li>
<li><a class="el" href="classaworx_1_1lox_1_1Log.html#a10ac165398697ce1d642d739cc3b170f">Log::DomainLevel::ERRORS </a></li>
<li><a class="el" href="classaworx_1_1lox_1_1Log.html#a10ac165398697ce1d642d739cc3b170f">Log::DomainLevel::WARNINGS_AND_ERRORS </a></li>
<li><a class="el" href="classaworx_1_1lox_1_1Log.html#a10ac165398697ce1d642d739cc3b170f">Log::DomainLevel::INFO_WARNINGS_AND_ERRORS</a></li>
<li><a class="el" href="classaworx_1_1lox_1_1Log.html#a10ac165398697ce1d642d739cc3b170f">Log::DomainLevel::ALL </a></li>
</ul>
<p>Let us extend our sample code and see what happens. Replace the last line (the log call) by four different log calls and let your code look like this:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line"></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;APP&quot;</span>, Log::DomainLevel::InfoWarningsAndErrors );</div><div class="line"></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga8d8e6df0e755763bd471751235199baf">Log_Error</a>  ( <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;A severe error happened :-(&quot;</span> );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa9822f0eda4cc7e9c3f3e99d6238f2aa">Log_Warning</a>( <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;This is a warning :-/ Maybe an error follows?&quot;</span> );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a>   ( <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;Just for your further information!&quot;</span> );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga975fbf7e95ed6506992f9714627202d0">Log_Verbose</a>( <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;Today, I am in the mood to talk...&quot;</span> );</div></div><!-- fragment --><p> If you run your application now (in "Debug" mode), the following output should appear:</p>
<pre class="fragment">src.cpp/alox.unittests/ut_alox_tutorial.cpp(116):TestBody() [00:00.000 +046 µs] [UnitTest] [ERR] [APP] (001): A severe error happened :-(
src.cpp/alox.unittests/ut_alox_tutorial.cpp(117):TestBody() [00:00.000 +007 µs] [UnitTest] [WRN] [APP] (002): This is a warning :-/ Maybe an error follows?
src.cpp/alox.unittests/ut_alox_tutorial.cpp(118):TestBody() [00:00.000 +003 µs] [UnitTest]       [APP] (003): Just for your further information!</pre><p>As you see, the last line of our code, containing the <a class="el" href="classaworx_1_1lox_1_1Lox.html#af6093dbce9dbbeffcf76362b4abacac8">Verbose()</a> log statement was not logged! This is because in line two of the code we set the <em>log domain level</em> to <a class="el" href="classaworx_1_1lox_1_1Log.html#a10ac165398697ce1d642d739cc3b170f">INFO_WARNINGS_AND_ERRORS</a>. This tells the logging system that logs implemented with the method <a class="el" href="classaworx_1_1lox_1_1Lox.html#af6093dbce9dbbeffcf76362b4abacac8">Verbose()</a> are not to be logged.</p>
<p>The following table lists the domain log levels in the columns and the <em>log level</em> in the rows and shows which log levels are activated when a certain <em>log domain level</em> is set:</p>
<table  border="1">
<tr>
<td><center>Domain Level / Log Level</center> </td><th width="100">Verbose </th><th width="100">Info </th><th width="100">Warning </th><th width="100">Error  </th></tr>
<tr>
<td><b><center>OFF</center></b> </td><td><center>No</center> </td><td><center>No</center> </td><td><center>No</center> </td><td><center>No</center> </td></tr>
<tr>
<td><b><center>ERRORS</center></b> </td><td><center>No</center> </td><td><center>No</center> </td><td><center>No</center> </td><td><center>Yes</center>  </td></tr>
<tr>
<td><b><center>WARNINGS_AND_ERRORS</center></b> </td><td><center>No</center> </td><td><center>No</center> </td><td><center>Yes</center> </td><td><center>Yes</center>  </td></tr>
<tr>
<td><b><center>INFO_WARNINGS_AND_ERRORS</center></b> </td><td><center>No</center> </td><td><center>Yes</center> </td><td><center>Yes</center> </td><td><center>Yes</center>  </td></tr>
<tr>
<td><b><center>ALL</center></b> </td><td><center>Yes</center> </td><td><center>Yes</center> </td><td><center>Yes</center> </td><td><center>Yes</center> </td></tr>
</table>
<p>Fairly easy, right? With each line in the table, one further (more verbose) log type is added.</p>
<p>To summarize, the above paragraph introduced you to the concepts of:</p><ol type="1">
<li><em>Log domains</em> as a parameter of the four log methods <a class="el" href="classaworx_1_1lox_1_1Lox.html#a3dab1b8384cf49f26424e34436c5b744">Lox::Error()</a>, <a class="el" href="classaworx_1_1lox_1_1Lox.html#ab00a8f8c882ff229ed5ff26ab1f5633d">Lox::Warning()</a>, <a class="el" href="classaworx_1_1lox_1_1Lox.html#ad52f89dd7d537db1a1bf70eb5b1c9ae0">Lox::Info()</a> and <a class="el" href="classaworx_1_1lox_1_1Lox.html#af6093dbce9dbbeffcf76362b4abacac8">Lox::Verbose()</a></li>
<li><em>Log domain levels</em> that are assigned to <em>log domains</em> at runtime using the method <a class="el" href="classaworx_1_1lox_1_1Lox.html#a0676d6fc6dd68d7c2c0ca49ab8abe630">Lox::SetDomain()</a></li>
<li><em>Log levels</em> that are assigned to each log statement in your code by choosing the right log method.</li>
</ol>
<p>Now, you should understand how the comparison of the <em>log domain level</em> and the <em>log level</em> decides about whether a log is executed or not.</p>
<h2><a class="anchor" id="tutcpp_llld_2"></a>
3.2. Default domains</h2>
<p>If you already liked the tiny code that is necessary to implement ALox Logging, then you will appreciate this section, because we want to make it even smaller. Replace the code you added to your project so far by this one:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;APP&quot;</span>, Log::Scope::SourceFile );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;APP&quot;</span>, Log::DomainLevel::InfoWarningsAndErrors );</div><div class="line"></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga8d8e6df0e755763bd471751235199baf">Log_Error</a>  ( <span class="stringliteral">&quot;A severe error happened :-(&quot;</span> );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa9822f0eda4cc7e9c3f3e99d6238f2aa">Log_Warning</a>( <span class="stringliteral">&quot;This is a warning :-/ Maybe an error follows?&quot;</span> );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a>   ( <span class="stringliteral">&quot;Just for your further information!&quot;</span> );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga975fbf7e95ed6506992f9714627202d0">Log_Verbose</a>( <span class="stringliteral">&quot;Today, I am in the mood to talk...&quot;</span> );</div></div><!-- fragment --><p> The output remains the same:</p>
<pre class="fragment">src.cpp/alox.unittests/ut_alox_tutorial.cpp(142):TestBody() [00:00.000 +049 µs] [UnitTest] [ERR] [APP] (001): A severe error happened :-(
src.cpp/alox.unittests/ut_alox_tutorial.cpp(143):TestBody() [00:00.000 +007 µs] [UnitTest] [WRN] [APP] (002): This is a warning :-/ Maybe an error follows?
src.cpp/alox.unittests/ut_alox_tutorial.cpp(144):TestBody() [00:00.000 +003 µs] [UnitTest]       [APP] (003): Just for your further information!</pre><p>OK, you might argue, the code became longer: We added line 3, which invokes a different versio of [Lox::SetDomain](<a class="el" href="classaworx_1_1lox_1_1Lox.html#a0676d6fc6dd68d7c2c0ca49ab8abe630">aworx::lox::Lox::SetDomain(const TString&amp;, Log::Scope)</a>. This method registers the domain with ALox and offers the possibility to set the given domain name as the default domain for the actual <a class="el" href="classaworx_1_1lox_1_1Log.html#aaecc53892786f2fa11e682f633af84c6">Scope</a> (source file or method).</p>
<p>What becomes less code however are the log statements <a class="el" href="classaworx_1_1lox_1_1Lox.html#a3dab1b8384cf49f26424e34436c5b744">Error()</a>, <a class="el" href="classaworx_1_1lox_1_1Lox.html#ab00a8f8c882ff229ed5ff26ab1f5633d">Warning()</a>, <a class="el" href="classaworx_1_1lox_1_1Lox.html#ad52f89dd7d537db1a1bf70eb5b1c9ae0">Info()</a> and <a class="el" href="classaworx_1_1lox_1_1Lox.html#af6093dbce9dbbeffcf76362b4abacac8">Verbose()</a>. They do not need to have the domain as a parameter any more! This provides the following advantages:</p><ul>
<li>Less typing</li>
<li>Easier reading</li>
<li>You can just copy/paste your log lines to different sources, without <em>adjusting</em> the log domains. They automatically use what defaulted for target this scope.</li>
<li>You can change the name of the domain by changing it in a single place.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>You can still use the log methods including the domain parameter to overwrite the default domain</li>
<li>You can address "sub domains" relatively to your default domain within a scope that got a default domain </li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>For further reading on domains and <em>sub domains</em>, see <a href="../man_levelsanddomains.html">corresponding chapter</a> in the ALox user Manual.</dd></dl>
<p>What happens if <b>SetDomain</b> is not invoked and ALox does not know about the domains? As we have seen in the entry chapter, ALox still works:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;Hello ALox&quot;</span> );</div></div><!-- fragment --><p> Which works fine. But let's look behind the scenes:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <a class="code" href="group__GrpALoxMacrosLowLevel.html#ga71f7449b6ad8bbd0ba22f897d7338a22">LOG_LOX</a>.InternalDomain, Log::DomainLevel::InfoWarningsAndErrors );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;APP&quot;</span>, <span class="stringliteral">&quot;Hello ALox&quot;</span> );</div></div><!-- fragment --><p> We have enabled internal ALox warnings by setting the domain that ALox uses for such purposes (found in field <a class="el" href="classaworx_1_1lox_1_1Lox.html#a9bccc0d3300ad844c867a263e6e3e8bd">Lox::InternalDomain</a>.</p>
<p>The output now is:</p>
<pre class="fragment">src.cpp/alox.unittests/ut_alox_tutorial.cpp(174):TestBody() [00:00.000 +004 µs] [UnitTest]       [ALOX] (001): SetDomain: Domain "ALOX" log level set to "InfoWarningsAndErrors" for logger "CONSOLE".
src.cpp/alox.unittests/ut_alox_tutorial.cpp(175):TestBody() [00:00.000 +---   ] [UnitTest]       [APP ] (002): Hello ALox
src.cpp/alox.unittests/ut_alox_tutorial.cpp(175):TestBody() [00:00.000 +---   ] [UnitTest]       [ALOX] (003): Domain Resolution: Domain 'APP' implicitly registered for Logger 'CONSOLE' Inherited DomainLevel: All</pre><p>From this example we learn that <em>log domains</em> which are neither registered for a scope nor set with a log level do not cause any problem. ALox just creates them on the fly and continues its job.</p>
<p>The <em>domain level</em> that such <em>unknown</em> domains receive is inherited through the domain chain up to the root domain. The root domain is a field existing in each <em>logger</em>. By default the root domain of a <a class="el" href="classaworx_1_1lox_1_1loggers_1_1ConsoleLogger.html">ConsoleLogger</a> has its <em>domain level</em> set to <em>All</em>. This is extremely useful, because whenever you are using 3rd party code that defines its custom domain names, you can easily identify those domains in your log stream. In contrast, other loggers that you create for specific purposes (e.g. log only messages of certain domains into a file), do not enable <em>unknown</em> domains as a default. Therefore, these special purpose loggers stay clean and log only what you explicitly ask them to log.</p>
<dl class="section note"><dt>Note</dt><dd>On the same token, in this sample also a debug logger is created on the fly. ALox tries to auto-configure itself as good as possible and reasonable, even with creating logger types that fit your console output or an IDE you are running the software in. For release logging, ALox does not consider it 'reasonable' to create a release logger on the fly. When no logger was created, release log statements just do nothing. Also, no error is raised (would be bad in a release environment.)</dd></dl>
<h2><a class="anchor" id="tutcpp_llld_3"></a>
3.3. Where to place ALox log code</h2>
<p>As we now know a bit about <em>log domains</em>, we can briefly talk about where to add ALox statements in your code. In the standard application setup, there are two places, plus an optional third one.</p>
<h3>3.3.1 Create Loggers and define domain levels in <b>the bootstrap section</b> of your application</h3>
<p>When your application loads, as early in the lifecycle as possible, you usually want to create your loggers and set some <em>log domain level</em> values for a selected <em>log domain</em>.</p>
<p>A good place is the <b>main()</b> method or whatever the earliest entry point to your code is.</p>
<p>Code for this section would look like this:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;MYAPP&quot;</span>,     Log::DomainLevel::All );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;SOCKETS&quot;</span>,   Log::DomainLevel::WarningsAndErrors );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;UI&quot;</span>,        Log::DomainLevel::Errors );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;UI/DLGS&quot;</span>,   Log::DomainLevel::InfoWarningsAndErrors );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;3DCALC&quot;</span>,    Log::DomainLevel::Off );</div></div><!-- fragment --><p> Of course, you can add and remove loggers anywhere in your code. Also, you can modify <em>domain log levels</em> later at runtime as you please.</p>
<dl class="section note"><dt>Note</dt><dd>This is also a good place to configure your log output the way you prefer it. Some hints how to do that are <a href="../man_loggers.html#man_loggers_textlogger">given here</a>.</dd></dl>
<h3>3.3.2 Add log messages anywhere in your code</h3>
<p>The second part is obvious: you add log statements in your code as you please. Looking at the above sample class, we register two domains "MYDOM" and its sub domain* "PERF". Consider the <em>sub domain</em> "PERF" is used for performance log statements Somewhere in the class a method <b>heavyCalculation()</b> is invoked. A typical use of ALox would look like this:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;MYDOM/PERF&quot;</span>, <span class="stringliteral">&quot;Heavy calculation started...&quot;</span> );</div><div class="line">        heavyCalculation();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;MYDOM/PERF&quot;</span>, <span class="stringliteral">&quot;Heavy calculation finished!&quot;</span> );</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>As a side note, in this sample, with the log output of the second line, we get the elapsed time displayed. There is no need to do your own math with the timestamps. In fact, the value is displayed in a human readable way, depending on the size of the time span. (Other date and time outputs, like current date or absolute time can be configured to be logged as well, see class <a class="el" href="classaworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">TextLogger</a> for more information).</dd></dl>
<p>As "PERF" is a <em>sub domain</em> of "MYDOM" and "MYDOM" got set as the <em>default domain</em> for the source file, the domain "MYDOM/PERF" could be also referenced using "~PERF". The code then looks like this:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;~PERF&quot;</span>, <span class="stringliteral">&quot;Heavy calculation started...&quot;</span> );</div><div class="line">        heavyCalculation();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;~PERF&quot;</span>, <span class="stringliteral">&quot;Heavy calculation finished!&quot;</span> );</div></div><!-- fragment --><p> Advantages of this approach are:</p><ul>
<li>less typing</li>
<li>you can copy/paste the code into a different class (with a different parent domain) without changing it.</li>
</ul>
<h3>3.3.3 Name your threads</h3>
<p>The third and really optional one is about multi threaded applications. ALox optionally logs information about the thread id or name that executed the code containing your log statements.</p>
<p>Often threads do not have a name, but just an ID. It would be much nicer to see a nice name instead of that id. ALox provides a simple mechanism to map thread IDs to variable thread names using the <a class="el" href="classaworx_1_1lox_1_1Lox.html#a3911541857ea84938dede341ceb64ddd">Lox::MapThreadName</a> interface.</p>
<p>Let us go back to the Hello ALox sample and add one line to rename the currently executed thread:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gad01526d3f277fab96faf18695d25cb7e">Log_MapThreadName</a>( <span class="stringliteral">&quot;BKGRND&quot;</span> );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( <span class="stringliteral">&quot;Hello ALox&quot;</span> );</div></div><!-- fragment --><p> The generated output is:</p>
<pre class="fragment">src.cpp/alox.unittests/ut_alox_tutorial.cpp(228):TestBody() [00:00.000 +008 µs] [BKGRND] [ERR] [ALOX] (001): Domain Resolution: No log domain given and no default domain set for scope &lt;/home/ALox/src.cpp/alox.unittests/ut_alox_tutorial.cpp - TestBody&gt;.
src.cpp/alox.unittests/ut_alox_tutorial.cpp(228):TestBody() [00:00.000 +---   ] [BKGRND]       [NULL] (002): Hello ALox</pre><p>As you see, the currently executed thread is now named <em>BKGRND</em>. All log statements that will be executed by this thread after the mapping takes place, will log this name.</p>
<dl class="section note"><dt>Note</dt><dd>Renaming threads in ALox will <em>not</em> rename the thread in your operating system. It is a purely ALox defined mapping of threads to ALox thread names.</dd></dl>
<p>The mechanism is simple, but it might not be simple to identify the right place in the code to put it! Some code can be executed from different threads, and sometimes (for example when using an UI framework) you might not even know exactly which thread will invoke your code. However, the good news is that each thread ID has to be mapped only once during the lifecycle of the program, but may be mapped multiple times. Therefore, the guideline is:</p>
<ul>
<li>For threads that your own code starts, the name mapping should occur in the start code of-course.</li>
<li>Otherwise: Identify a piece of code from which you are sure that only one certain thread invokes that code.</li>
<li>Make sure that this code is not executed frequently (to avoid the overhead caused by the duplicated mapping ).</li>
<li>Make sure that this code is executed early in the lifecycle of your application, so that all log lines are equipped with the right thread name mapping.</li>
</ul>
<p>For the sample of UI Frameworks, a good place to invoke <a class="el" href="classaworx_1_1lox_1_1Lox.html#a3911541857ea84938dede341ceb64ddd">Lox::MapThreadName</a> is the initial creation callback of your main application UI component. Normally, it is enough to put this statement only in one component (the main one), because all other components will be initialized by the same Framework thread.</p>
<p>But as this is a convenience concept anyhow, it is good practice to not care too much about it at first. Later, when your application grows, you can check your log files periodically for new, unmapped thread IDs. When you see one, scroll up in the log file and try to identify the very first appearance of a this new ID. A double click on the log line will open the code that invoked the log. If you have populated your code with a reasonable amount of log entries, you will end up at the right place automatically! It also might be a good idea to restart your app with all domains set to verbose level and then look for the first appearances of unknown threads.</p>
<h3>3.3.4 Upon termination</h3>
<p>Before termination of a software, optionally <a class="el" href="classaworx_1_1lox_1_1Log.html#a2a0bcae1f7341255492ebc90deab5f01">Log::TerminationCleanUp</a> may be invoked. This is not really necessary, because all it does is freeing memory (and this will be done anyhow by the operating system as soon as a process is terminated). Memory profiling tools (like Valgrind) will not report leaks when this method is invoked.</p>
<h1><a class="anchor" id="tutcpp_more"></a>
4. Some more Details</h1>
<h2><a class="anchor" id="tutcpp_more_1"></a>
4.1 Stop reading here?</h2>
<p>Developers are often in a hurry and reading tutorials is time consuming. If you are only using the part of ALox the tutorial has covered up to this point you should already benefit a lot from the ALox library and your programmer's life should have become easier and more fun.</p>
<p>A-Worx (the maker of ALox) is a consultant to the software industry and one area of competence is code style and code cleanness (sorry, we don't want to be advertising here). Therefore, we emphasize our clients to stop using <em>temporary debug print lines</em> in their sources. Instead, use ALox (or a similar tool) and all your debug output lines should be implemented tidy and clean using a nice language for the messages. With ALox, such debug output should never be temporary again and as such never be removed from the code! Programmers often remove debug output after they think a piece of code works. But if problems arise or if the code is further extended at a later stage, similar lines are inserted and re-written. This is obviously a waste of time. With ALox, you just disable certain log domains for which you think the code is fine and be able to reactivate them (with different verbose levels) in the moment your interest moves back to it!</p>
<p>If you want and have the time to continue reading, you are invited to learn more pretty neat features. Here we go!</p>
<h2><a class="anchor" id="tutcpp_more_astring"></a>
4.2 Using StringNN to create your log messages</h2>
<p>In many occasions, a log message consists of a string that is assembled from strings and values. Creating such strings is time consuming and slows down the execution speed of your program. Usually, when strings are concatenated, memory allocations are performed. We want to avoid such allocations and therefore, ALox exports the ALib class <a class="el" href="classaworx_1_1lib_1_1strings_1_1ASAlloc.html">AString</a>. AString manages an internal, heap allocated buffer and provides various methods and overloaded operators to append values.</p>
<p>As we want to avoid just <em>all</em> allocations on the memory heap, AString is extended by template class <a class="el" href="classaworx_1_1lib_1_1strings_1_1ASPreAlloc.html">ASPreAlloc&lt;size_t&gt;</a>, which allocates the amount of string buffer space provided in the template parameter 'internally'.</p>
<dl class="section note"><dt>Note</dt><dd>Internally here means: If class <em>ASPreAlloc&lt;size_t&gt;</em> is allocated on the stack, also its buffer resides on the stack. If allocated in the heap using the new() operator, then the buffer memory is a part of the heap allocation of the class itself. In other words: in the latter case, only one heap allocation is performed while in the stack allocation case, no heap allocation is performed.</dd></dl>
<p>ALib provides type definitions for the most common sizes: String16*, <em>String32</em>, <em>String64</em>, ... <em>String1K</em>, <em>String2K</em>, <em>String4K</em>.</p>
<p>OK, if you are new to C++ and not too accustomed, yet with memory allocation details, then the good news is: The use of StringNN is very simple! Here is a sample code:</p>
<div class="fragment"><div class="line">    <span class="keywordtype">double</span>  result= heavyCalculation();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a>( <a class="code" href="namespaceaworx.html#ad16dfdce0f76423f90dcf6821f8b4a7e">String64</a>() &lt;&lt; <span class="stringliteral">&quot;Heavy calculation finished. Result: &quot;</span> &lt;&lt; result );</div></div><!-- fragment --><p> A more complex sample for debug logging using a stack allocated AString object is provided here:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;DB_QUERIES&quot;</span>, Log::Scope::SourceFile );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;DB_QUERIES&quot;</span>, Log::DomainLevel::All );</div><div class="line"></div><div class="line">    <span class="comment">// get users from database</span></div><div class="line">    vector&lt;std::string&gt; usersInDB;</div><div class="line">    getUsersFromDB( usersInDB );</div><div class="line"></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a>( <a class="code" href="namespaceaworx.html#ad16dfdce0f76423f90dcf6821f8b4a7e">String64</a>() &lt;&lt; <span class="stringliteral">&quot;There are &quot;</span> &lt;&lt; usersInDB.size() &lt;&lt; <span class="stringliteral">&quot; users in the database&quot;</span>  );</div><div class="line"></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( <a class="code" href="namespaceaworx.html#a81ae91cb74396a4fc28abd35ed7ff052">String256</a> userNames(<span class="stringliteral">&quot;The users are: &quot;</span>);   )</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( <span class="keywordflow">for</span>( <span class="keyword">auto</span> user : usersInDB )               )</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>(     userNames &lt;&lt; user &lt;&lt; <span class="charliteral">&#39; &#39;</span>;              )</div><div class="line"></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga975fbf7e95ed6506992f9714627202d0">Log_Verbose</a>( userNames )</div></div><!-- fragment --><p> In our sample, we place code that is only inserted for the sake of generation debug log output into the macro <b>Log_Prune</b>. This just removes this code in the release version of the software the same as the logging statements are pruned.</p>
<dl class="section note"><dt>Note</dt><dd>Yes, also the macro Log_Prune does not follow the capital case convention for C++ macros. We decided to <em>not</em> adhere to this convention for all logging macros that will appear everywhere in your code later, which, as noted before, increases readability and especially source compatibility with ALox libraries for other programming languages, where pruning is not implemented by macros.</dd></dl>
<p>The log output could look as follows:</p>
<pre class="fragment">src.cpp/alox.unittests/ut_alox_tutorial.cpp(294):TestBody() [00:00.000 +013 µs] [MAIN]       [DB_QUERIES] (001): There are 6 users in the database
src.cpp/alox.unittests/ut_alox_tutorial.cpp(295):TestBody() [00:00.000 +---   ] [MAIN] [***] [DB_QUERIES] (002): The users are: Lisa John Joe </pre><p>As you see in the sample, we chose two different sizes for the string class, 64 and 256. The rules for choosing those are as follows:</p><ul>
<li>first of all: if a size is too small for the string to be written, this is <em>not</em> serious. <a class="el" href="classaworx_1_1lib_1_1strings_1_1ASPreAlloc.html">ASPreAlloc&lt;size_t&gt;</a> will just allocate heap memory to perform all operations. So, all we are talking here is performance optimization.</li>
<li>second of all: If a preallocated is chosen too big, this also does not hurt, because all it does is reserving stack memory, which is <em>'released'</em> as soon as the current scope is left.</li>
<li>You should avoid to allocate too much stack memory if many recursive calls are invoked. What helps here, is to place logging and the use of the AStringNN in its own code block (curly braces). When the code block is left, the stack allocation will be freed instantly.</li>
</ul>
<p>This is of-course all common knowledge to C++ programmers and not specific to ALox. </p><dl class="section note"><dt>Note</dt><dd><ul>
<li>The sample above appends a <em>std::string</em> to an <em>ALib string</em>. To support this, header file <em>"alib/compatibility/std_string.hpp"</em> has to be included.</li>
<li>For more information about string classes provided by <em>ALib</em>, refer to <a class="el" href="namespaceaworx_1_1lib_1_1strings.html">aworx::lib::strings</a>.</li>
</ul>
</dd></dl>
<h2><a class="anchor" id="tutcpp_more_conditional"></a>
4.3 Conditional logging</h2>
<p>Often log lines should only be displayed if a certain condition is met. Here is a sample:</p>
<div class="fragment"><div class="line">    <span class="keywordtype">int</span> i= 0;</div><div class="line">    <span class="keywordflow">while</span>( i &lt; len )</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> ( array[i] == search )</div><div class="line">        {</div><div class="line">            process( i );</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        i++;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span> ( i == len )</div><div class="line">        <a class="code" href="group__GrpMacrosDebugLog.html#ga8d8e6df0e755763bd471751235199baf">Log_Error</a>( <span class="stringliteral">&quot;Nothing found :-(&quot;</span> );</div></div><!-- fragment --><p> The last two lines can be replaced by one as follows:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga2797c2e9f997606c3c786fa68720ac71">Log_Assert</a>( i &lt; len, <span class="stringliteral">&quot;Nothing found :-(&quot;</span> );</div></div><!-- fragment --><p> Advantages are again less typing and better readability of the code. Furthermore, the C++ compiler would probably not prune the <em>if statement</em> if it was a more complex evaluation. As with using <em>Assert()</em> the evaluation of the expression is definitely pruned from your code. (Be sure you do not put side effects into expressions of <em>Assert()</em> invocations.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>In accordance with the concept of assertions, the condition has to be 'false' to have ALox perform the log.</li>
<li>The <em>log level</em> of <em>Assert()</em> is <em>Log::Level::ERROR</em></li>
</ul>
</dd></dl>
<p>The method <a class="el" href="classaworx_1_1lox_1_1Lox.html#a3499398cbeb8d1a26f5eea3399514111">Lox::Assert()</a> is, similar to the other log methods of class <a class="el" href="classaworx_1_1lox_1_1Lox.html">Lox</a>, (namely <a class="el" href="classaworx_1_1lox_1_1Lox.html#a3dab1b8384cf49f26424e34436c5b744">Error()</a>, <a class="el" href="classaworx_1_1lox_1_1Lox.html#ab00a8f8c882ff229ed5ff26ab1f5633d">Warning()</a>, <a class="el" href="classaworx_1_1lox_1_1Lox.html#ad52f89dd7d537db1a1bf70eb5b1c9ae0">Info()</a> and <a class="el" href="classaworx_1_1lox_1_1Lox.html#af6093dbce9dbbeffcf76362b4abacac8">Verbose()</a> ), just a shortcut into the full featured log method <a class="el" href="classaworx_1_1lox_1_1Lox.html#a36309b70ccb095ea31e0a428111a4d2a">Lox::Line()</a>, setting some default parameters. In rare cases, it might be useful to know and use <a class="el" href="classaworx_1_1lox_1_1Lox.html#a36309b70ccb095ea31e0a428111a4d2a">Lox::Line()</a> directly. By understanding the "shortcut methods" discussed in this tutorial, it will be easy to understand the use cases and syntax for this general method by reading the class reference. For example, if you want to do condition logging similar to the <em>Assert()</em> method but with a log level different to <em>Log::Level::ERROR</em>, then you might want to use <a class="el" href="classaworx_1_1lox_1_1Lox.html#a36309b70ccb095ea31e0a428111a4d2a">Lox::Line()</a> and set all parameters as you wish.</p>
<h2><a class="anchor" id="tutcpp_more_logtools"></a>
4.4 LogTools: Log complex things easily</h2>
<p>Ooopps, unfortunately, we have to skip this chapter in the C++ Version of ALox. While C# and Java provide runtime type information and class reflection (introspection), pure C++ does not. Therefore, we are missing the extremely handy LogTools class in C++, which in the other ALox incarnations recursively log complex objects automatically.</p>
<p>Therefore, if you want to <em>dump</em> more complex objects you have to extend your classes (and probably their subclasses) with corresponding helper functions that assemble a log string.</p>
<p>What helps to have a clear presentation of objects dumps within your log files are the concepts of <em>indentation</em> and <em>multi-line message</em> logging that ALox provides.</p>
<p>Here is a sample output from the Java LogTools class that give you and idea how nicely a dumped object might look, if recursive logging is done rightly:</p>
<p>ATTENTION: This is Java code, taken from the ALox for Java tutorial!* </p><div class="fragment"><div class="line">    <span class="comment">// Log multi-lines without indent</span></div><div class="line">    ((TextLogger) Log.getLogger( <span class="stringliteral">&quot;Console&quot;</span> )).multiLineMsgMode= 4;</div><div class="line"></div><div class="line">    <span class="comment">// Log current thread instance</span></div><div class="line">    LogTools.instance( <span class="stringliteral">&quot;MYDOM&quot;</span>, Log.Level.INFO, Thread.currentThread(), 2, <span class="stringliteral">&quot;Actual Thread: &quot;</span>, 1 );</div></div><!-- fragment --><p> As you can see, we are just passing a quite complex object, the current thread, to the method. The parameter that follows the object which is to be logged determines the level of recursively logging composite objects. Here are the first lines of output of the above sample:</p>
<pre class="fragment">&gt;&gt; Actual Thread:                                                    {Thread}
&gt;&gt; &lt;01&gt;  name:                         "main"                        {[C}
&gt;&gt; &lt;02&gt;  priority:                     5                             {Integer}
&gt;&gt; &lt;03&gt;  threadQ:                      &lt;null&gt;
&gt;&gt; &lt;04&gt;  eetop:                        140184377135104               {Long}
&gt;&gt; &lt;05&gt;  single_step:                  false                         {Boolean}
&gt;&gt; &lt;06&gt;  daemon:                       false                         {Boolean}
&gt;&gt; &lt;07&gt;  stillborn:                    false                         {Boolean}
&gt;&gt; &lt;08&gt;  target:                       &lt;null&gt;
&gt;&gt; &lt;09&gt;  group:                                                      {ThreadGroup}
&gt;&gt; &lt;10&gt;    name:                       "main"                        {String}
&gt;&gt; &lt;11&gt;    maxPriority:                10                            {Integer}
&gt;&gt; &lt;12&gt;    destroyed:                  false                         {Boolean}
&gt;&gt; &lt;13&gt;    daemon:                     false                         {Boolean}
&gt;&gt; &lt;14&gt;    vmAllowSuspension:          false                         {Boolean}
&gt;&gt; &lt;15&gt;    nUnstartedThreads:          0                             {Integer}
&gt;&gt; &lt;16&gt;    nthreads:                   2                             {Integer}
&gt;&gt; &lt;17&gt;    threads:                    (MAX REC) @46faf015           {[Ljava.lang.Thread;}
&gt;&gt; &lt;18&gt;    ngroups:                    0                             {Integer}
&gt;&gt; &lt;19&gt;    groups:                     &lt;null&gt;
&gt;&gt; &lt;20&gt;  contextClassLoader:                                         {sun.misc.Launcher$AppClassLoader}
&gt;&gt; &lt;21&gt;  inheritedAccessControlContext:                              {java.security.AccessControlContext}
&gt;&gt; &lt;22&gt;    context:                    &lt;null&gt;
&gt;&gt; &lt;23&gt;    isPrivileged:               false                         {Boolean}
&gt;&gt; &lt;24&gt;    isAuthorized:               true                          {Boolean}
&gt;&gt; &lt;25&gt;    privilegedContext:          &lt;null&gt;
&gt;&gt; &lt;26&gt;    combiner:                   &lt;null&gt;
&gt;&gt; &lt;27&gt;    permissions:                &lt;null&gt;
&gt;&gt; &lt;28&gt;    parent:                     &lt;null&gt;
&gt;&gt; &lt;29&gt;    isWrapped:                  false                         {Boolean}
&gt;&gt; &lt;30&gt;    isLimited:                  false                         {Boolean}
&gt;&gt; &lt;31&gt;    limitedContext:             &lt;null&gt;
...
...
...
</pre><p>When implementing an object dump, you should not place a log statement for every attribute. In contrast, you should collect the whole dump within an AString and then log this String as a whole.</p>
<p>For future versions of ALox for C++, it is planned to provide:</p><ul>
<li>Working with debug information to implement log tools for user defined classes</li>
<li>Preprocessor macros that standardize the customized logging of complex objects</li>
<li>Tools to log certain standard classes from STL, BOOST, QT or what have you. You are invited to send us your proposals of log tool code for common libraries to be included in our codebase.</li>
</ul>
<h2><a class="anchor" id="tutcpp_more_seplog"></a>
4.5 Directing log output to distinct loggers</h2>
<p>Because ALox stores the <em>log domain level</em> not only per <em>domain</em> but also 'per <em>logger</em>', we just need to fill in a default parameter in <a class="el" href="classaworx_1_1lox_1_1Lox.html#a0676d6fc6dd68d7c2c0ca49ab8abe630">Lox::SetDomain()</a> to assign different domain levels to different <em>loggers</em>.</p>
<p>In the following sample code we are creating two different <em>loggers</em>, one <a class="el" href="classaworx_1_1lox_1_1loggers_1_1ConsoleLogger.html">ConsoleLogger</a> and one of type <a class="el" href="classaworx_1_1lox_1_1loggers_1_1MemoryLogger.html">MemoryLogger</a>. The latter just logs into an internal buffer. Then we add three different <em>log domains</em>:</p><ul>
<li>"DOM" that should log to both loggers</li>
<li>"DOM/CON" that should log only to the ConsoleLogger</li>
<li>"DOM/MEM" that should log only to the MemoryLogger</li>
</ul>
<p>Let's have a look at the code first:</p>
<div class="fragment"><div class="line">    <span class="comment">// create two different loggers</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( MemoryLogger memLogger(<span class="stringliteral">&quot;MY_MEM_LOGGER&quot;</span>); )</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga518bf5331afc5bd2e6d79a9f290ae8b6">Log_AddLogger</a>( &amp;memLogger );</div><div class="line"></div><div class="line">    <span class="comment">// reduce meta information to limit tutorial output width</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( memLogger.MetaInfo-&gt;Format= <span class="stringliteral">&quot;[%O]: &quot;</span>;   )</div><div class="line"></div><div class="line">    <span class="comment">// register domains DOM as default and add two sub domains</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;DOM&quot;,      Log::Scope::Method );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;DOM/CON&quot;,  Log::Scope::None );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;DOM/MEM&quot;,  Log::Scope::None );</div><div class="line"></div><div class="line">    <span class="comment">// set domain level of domain DOM for all loggers to ALL</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a> ( &quot;DOM&quot;,  Log::DomainLevel::All );</div><div class="line"></div><div class="line">    <span class="comment">// set domain level of &quot;DOM/SUB1&quot; to OFF for Logger 2</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a> ( &quot;~CON&quot;, Log::DomainLevel::Off, &quot;MY_MEM_LOGGER&quot; );</div><div class="line"></div><div class="line">    <span class="comment">// set domain level of &quot;DOM/SUB2&quot; to OFF for Logger 1</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a> ( &quot;~MEM&quot;, Log::DomainLevel::Off, &quot;DEBUG_LOGGER&quot;  );</div><div class="line"></div><div class="line">    <span class="comment">// Log something using each domain</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( &quot;DOM&quot;,   &quot;This goes to all loggers&quot; );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( &quot;~CON&quot;,  &quot;This goes to my console debug logger only&quot; );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( &quot;~MEM&quot;,  &quot;This goes to the memory logger only&quot; );</div><div class="line"></div><div class="line">    <span class="comment">// now we log the contents of the memory logger to the console</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( &quot;~CON&quot;,  &quot;This is the contents of the memory logger:&quot; );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaed4877ef3a04a6eb1ec1d4fba8305d75">Log_Info</a> ( &quot;~CON&quot;,  memLogger.MemoryLog );</div><div class="line"></div></div><!-- fragment --><p> Running the sample, we get the following log on the console:</p>
<pre class="fragment">src.cpp/alox.unittests/ut_alox_tutorial.cpp(366):TestBody() [00:00.000 +067 µs] [MAIN]       [DOM] (001): This goes to all loggers
src.cpp/alox.unittests/ut_alox_tutorial.cpp(367):TestBody() [00:00.000 +009 µs] [MAIN]       [DOM/CON]  (002): This goes to my console debug logger only
src.cpp/alox.unittests/ut_alox_tutorial.cpp(371):TestBody() [00:00.000 +012 µs] [MAIN]       [DOM/CON]  (003): This is the contents of the memory logger:
src.cpp/alox.unittests/ut_alox_tutorial.cpp(372):TestBody() [00:00.000 +004 µs] [MAIN]       [DOM/CON]  (004): &gt;&gt; [DOM]: This goes to all loggers
                                                                                                               &gt;&gt; [DOM/MEM]: This goes to the memory logger only</pre><p>The way we achieved the goal is that we use the method <a class="el" href="classaworx_1_1lox_1_1Lox.html#a0676d6fc6dd68d7c2c0ca49ab8abe630">Lox::SetDomain()</a> twice on each of the <em>sub domains</em>. And in contrast to previous samples, we are passing two more parameters to it (and overwrite their default values):</p><ul>
<li><a class="el" href="namespaceaworx_1_1lib_1_1enums.html#aeae0c2d4659a32ef54bd221d1a3da4e6">Propagation</a> <code>propagation</code> <br />
 This parameter defaults to <a class="el" href="namespaceaworx_1_1lib_1_1enums.html#aeae0c2d4659a32ef54bd221d1a3da4e6">Propagation::ToDecendants</a> and tells ALox to not only set the given <em>log domain</em> but all its <em>sub domains</em> to the <code>Log::DomainLevel</code> provided. We set this to <a class="el" href="namespaceaworx_1_1lib_1_1enums.html#aeae0c2d4659a32ef54bd221d1a3da4e6">Propagation::None</a>, because we do not have further <em>sub domains</em> either way.</li>
<li><b>String</b> <code>loggerFilter</code> <br />
 This parameter now is what helps us: It defaults to null and in this case does not filter any <em>logger</em>. So, when omitted, all <em>loggers</em> are affected. If given however, only those <em>loggers</em> whose field <a class="el" href="classaworx_1_1lox_1_1core_1_1Logger.html#ab3c68b8a64bf47454f94bde4ebb6de0b">Logger.Name</a> match the given filter string are affected.</li>
</ul>
<p>Looking back at the code, you will understand what is going on: For each <em>logger</em> we enable, respectively, disable the output of messages for the corresponding domains using <a class="el" href="classaworx_1_1lox_1_1Lox.html#a0676d6fc6dd68d7c2c0ca49ab8abe630">Lox::SetDomain()</a> by passing the appropriate filter.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>String comparison between <a class="el" href="classaworx_1_1lox_1_1core_1_1Logger.html#ab3c68b8a64bf47454f94bde4ebb6de0b">Logger.Name</a> and parameter <em>loggerFilter</em> is case insensitive.</li>
<li>ALox provides a minimum 'globbing' feature here: <em>loggerFilter</em> can start or end with an '*' character to fetch more than one logger at once.</li>
</ul>
</dd></dl>
<p>Some further quick remarks on the code:</p>
<ul>
<li><a class="el" href="classaworx_1_1lox_1_1loggers_1_1MemoryLogger.html#ab885e710ebb2c0ae44ee92604a4d56f8">MemoryLogger.MemoryLog</a> provides public access to its data. See class <a class="el" href="classaworx_1_1lib_1_1strings_1_1ASAlloc.html">AString</a> for more information.</li>
<li>As you can see from the output, the two log lines contained in the <a class="el" href="classaworx_1_1lox_1_1loggers_1_1MemoryLogger.html">MemoryLogger</a> are logged into two separated lines by the [ConsoleLogger(<a class="el" href="classaworx_1_1lox_1_1loggers_1_1ConsoleLogger.html">aworx::lox::loggers::ConsoleLogger</a>). This is a feature of <a class="el" href="classaworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">TextLogger</a>, the super class of both. <em>ConsoleLogger</em> and MemoryLogger inherit this feature to log out multi-line data in a readable format. Hence, logging all kinds of multi-line text documents (e.g. XML) results in a nicely readable output. The multiple line output can be modified in some ways and also can be turned off.</li>
<li>At the beginning of the sample, we are tweaking the output in the <a class="el" href="classaworx_1_1lox_1_1loggers_1_1MemoryLogger.html">MemoryLogger</a> a bit. Again, we are using features here available to all <a class="el" href="classaworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">TextLogger</a> descendants What we are achieving in this sample, is that the log output does not get too wide.</li>
</ul>
<p>For further reading on <em>TextLoggers</em>, see <a href="../man_loggers.html#man_loggers_textlogger">corresponding chapter</a> in the ALox user Manual.</p>
<h2><a class="anchor" id="tutcpp_more_config"></a>
4.6 ALox configuration and internal log messages</h2>
<p>In complex projects it might get a little confusing to keep track about the loggers and their domains. More importantly, when other software compontents of your project are using ALox as well (defining their own domains) then you might not know exactly which log domains* get registered and used by those.</p>
<p>While the sample of the previous section is not too complex, for this tutorial it is sufficient to demonstrate two different ways to have ALox log about <em>itself</em>.</p>
<p>From the previous sample we take the setup section, remove the log output, add some thread mapping to ALox and invoke <a class="el" href="classaworx_1_1lox_1_1Lox.html#a5ecb5f8a2a72316617ea48e6bcf695d4">LogConfig</a> in the end:</p>
<div class="fragment"><div class="line">    <span class="comment">// create two different loggers</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( MemoryLogger memLogger(<span class="stringliteral">&quot;MY_MEM_LOGGER&quot;</span>); )</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga518bf5331afc5bd2e6d79a9f290ae8b6">Log_AddLogger</a>( &amp;memLogger );</div><div class="line"></div><div class="line">    <span class="comment">// reduce meta information to limit tutorial output width</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( Log::DebugLogger-&gt;MetaInfo-&gt;Format=  <span class="stringliteral">&quot;[%t]%L[%O](%#): &quot;</span>;   )</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( memLogger.MetaInfo-&gt;Format=          &quot;[%t]%L[%O](%<span class="preprocessor">#): &quot;;   )</span></div><div class="line"></div><div class="line">    <span class="comment">// Our previous sample</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;DOM&quot;</span>,      Log::Scope::Method );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;DOM/CON&quot;</span>,  Log::Scope::None );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;DOM/MEM&quot;</span>,  Log::Scope::None );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;DOM&quot;</span>,  Log::DomainLevel::All );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;~CON&quot;</span>, Log::DomainLevel::Off, <span class="stringliteral">&quot;MY_MEM_LOGGER&quot;</span> );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;~MEM&quot;</span>, Log::DomainLevel::Off, <span class="stringliteral">&quot;DEBUG_LOGGER&quot;</span>  );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gad01526d3f277fab96faf18695d25cb7e">Log_MapThreadName</a>( <span class="stringliteral">&quot;Thread1&quot;</span> );</div><div class="line"></div><div class="line">    <span class="comment">// now, log the current config</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga1bac07b7ec3ca3616c301f171e9e73d9">Log_LogConfig</a>( <span class="keyword">nullptr</span>, Log::Level::Info, <span class="stringliteral">&quot;The current configuration of this Lox is:&quot;</span> );</div></div><!-- fragment --><p> We are invoking <a class="el" href="classaworx_1_1lox_1_1Lox.html#a5ecb5f8a2a72316617ea48e6bcf695d4">Lox::LogConfig()</a> which logs the current configuration of the lox. The output is quite self explanatory:</p>
<pre class="fragment">[Thread1]     [DOM](001): &gt;&gt; The current configuration of this Lox is:
                          &gt;&gt; ALib Version:      1601 (Rev. 0)
                          &gt;&gt; ALib compilation symbols:
                          &gt;&gt;   ALIB_DEBUG:          On
                          &gt;&gt;   ALIB_FEAT_THREADS:   On
                          &gt;&gt;   ALIB_DEBUG_STRINGS:  Off
                          &gt;&gt;   ALIB_GTEST:          Off
                          &gt;&gt;   ALIB_QTCREATOR:      Off
                          &gt;&gt;   ALIB_ECLIPSE:        Off
                          &gt;&gt;   ALIB_VSTUDIO:        Off
                          &gt;&gt; ALox compilation symbols:
                          &gt;&gt;   ALOX_DBG_LOG        : On
                          &gt;&gt;   ALOX_DBG_LOG_CI     : On
                          &gt;&gt;   ALOX_REL_LOG        : On
                          &gt;&gt;   ALOX_REL_LOG_CI     : Off
                          &gt;&gt; 
                          &gt;&gt; Version:         1601 (Rev. 0)
                          &gt;&gt; Intern. Domain:  ALOX
                          &gt;&gt; Thread Safeness: Safe
                          &gt;&gt; #Log Calls:      2
                          &gt;&gt; Code markers:    0
                          &gt;&gt; 
                          &gt;&gt; Named Threads:   1
                          &gt;&gt;   (-1):  "Thread1"
                          &gt;&gt; 
                          &gt;&gt; Default Domains: 1
                          &gt;&gt;   Domain:   DOM          Scope: "/home/ALox/src.cpp/alox.unittests/ut_alox_tutorial.cpp#TestBody"
                          &gt;&gt; 
                          &gt;&gt; Loggers:         2
                          &gt;&gt; 
                          &gt;&gt;   Logger: "DEBUG_LOGGER" Type: 'ANSI_CONSOLE'
                          &gt;&gt;     Creation Time: 2016-02-04 16:59:07
                          &gt;&gt;     Lines logged:  0
                          &gt;&gt;     Domains:
                          &gt;&gt;       /ALOX              WarningsAndErrors
                          &gt;&gt;       /DOM               All
                          &gt;&gt;       /DOM/MEM           Off
                          &gt;&gt; 
                          &gt;&gt;   Logger: "MY_MEM_LOGGER" Type: 'MEMORY'
                          &gt;&gt;     Creation Time: 2016-02-04 16:59:07
                          &gt;&gt;     Lines logged:  0
                          &gt;&gt;     Domains:
                          &gt;&gt;       /ALOX              WarningsAndErrors
                          &gt;&gt;       /DOM               All
                          &gt;&gt;       /DOM/CON           Off</pre><p>Besides this, there is a <b>second option</b> to inspect what happens internally in class <em>Lox</em>. ALox is equipped with an <em>internal log domain</em> named "ALOX". This domain is used by ALox to log messages about itself! All we have to do, is setting the domain level of the internal domain to verbose for our debug logger:</p>
<div class="fragment"><div class="line">    <span class="comment">// change internal domain (&quot;ALOX&quot;) to level &#39;All&#39;</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gaa891e8485ea970f574971c6afd851218">Log_AddDebugLogger</a>();</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( <span class="stringliteral">&quot;ALOX&quot;</span>,  Log::DomainLevel::All );</div><div class="line"></div><div class="line">    <span class="comment">// Our previous sample</span></div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( Log::DebugLogger-&gt;MetaInfo-&gt;Format=  <span class="stringliteral">&quot;[%t]%L[%O](%#): &quot;</span>;   )</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga7dbb7427d18d49e2dd87d5f2d2036e0b">Log_Prune</a>( MemoryLogger memLogger(&quot;MY_MEM_LOGGER&quot;); )</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#ga518bf5331afc5bd2e6d79a9f290ae8b6">Log_AddLogger</a>( &amp;memLogger );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;DOM&quot;,      Log::Scope::Method );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;DOM/CON&quot;,  Log::Scope::None );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;DOM/MEM&quot;,  Log::Scope::None );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;DOM&quot;,  Log::DomainLevel::All );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;~CON&quot;, Log::DomainLevel::Off, &quot;MY_MEM_LOGGER&quot; );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gac4a4311460b712126253fce7304ac6f4">Log_SetDomain</a>( &quot;~MEM&quot;, Log::DomainLevel::Off, &quot;DEBUG_LOGGER&quot;  );</div><div class="line">    <a class="code" href="group__GrpMacrosDebugLog.html#gad01526d3f277fab96faf18695d25cb7e">Log_MapThreadName</a>( &quot;Thread1&quot; );</div></div><!-- fragment --><p> The output will be:</p>
<pre class="fragment">[MAIN]     [ALOX](001): SetDomain: Domain "ALOX" log level set to "All" for logger "CONSOLE".
[MAIN]     [ALOX](002): AddLogger: Logger "MY_MEM_LOGGER" (MEMORY) added.
[MAIN]     [ALOX](003): SetDomain: Domain "DOM" set as default for scope "Method".
[MAIN]     [ALOX](004): SetDomain: Domain "DOM" log level set to "All" for logger "CONSOLE".
[MAIN]     [ALOX](005): SetDomain: Domain "DOM" log level set to "All" for logger "MY_MEM_LOGGER".
[MAIN]     [ALOX](006): SetDomain: Domain "DOM/CON" log level set to "Off" for logger "MY_MEM_LOGGER".
[Thread1]     [ALOX](007): MapThreadName: Mapped thread ID -1 to "Thread1". Original thread name was "MAIN".</pre><p>This way, you can exactly observe what is going on inside ALox.</p>
<p>To summarize: We have to ways to look into ALox:</p>
<ol type="1">
<li>Method <a class="el" href="classaworx_1_1lox_1_1Lox.html#a5ecb5f8a2a72316617ea48e6bcf695d4">Lox::LogConfig()</a> logs a "snapshot" of the current states. The advantage of this is, that it is all logged sequentially in one place and does not clutter your log output.</li>
<li>By setting the <em>log domain level</em> of the internal log domain "ALOX" to a more verbose level. While this clutters your log output and you might have to search the pieces in your overall log stream, the advantage here is that you see the caller information and therefore you see "where" a certain manipulation of the settings took place...and you can click on it!</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>Instead of 'hard-coding' the internal domain name <em>"ALOX"</em>, it is advisable to refer to field <a class="el" href="classaworx_1_1lox_1_1Lox.html#a9bccc0d3300ad844c867a263e6e3e8bd">Lox::InternalDomain</a>. This field can also be changed for a <b>Lox</b> to have it log internal stuff under a custom domain.</dd></dl>
<h2><a class="anchor" id="tutcpp_more_indentation"></a>
4.7 Indentation</h2>
<p>The outputs of the previous chapter look nicely formatted because it uses indentation when recursively walking through the internal ALox configuration.</p>
<p>Indentation is a core feature of every single log method. We just did not use it yet, because it is hidden as a default parameter.</p>
<p>See the documentation of the log methods <a class="el" href="classaworx_1_1lox_1_1Lox.html#a3dab1b8384cf49f26424e34436c5b744">Error()</a>, <a class="el" href="classaworx_1_1lox_1_1Lox.html#ab00a8f8c882ff229ed5ff26ab1f5633d">Warning()</a>, <a class="el" href="classaworx_1_1lox_1_1Lox.html#ad52f89dd7d537db1a1bf70eb5b1c9ae0">Info()</a> and <a class="el" href="classaworx_1_1lox_1_1Lox.html#af6093dbce9dbbeffcf76362b4abacac8">Verbose()</a> to identify where to add the indentation parameter.</p>
<p>The default indentation is 0. The result of increasing it depends on the Logger you are using. Class <a class="el" href="classaworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">TextLogger</a> for example (the base class of all console loggers of ALox) adds two spaces per indent (which is configurable with field <a class="el" href="classaworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html#a62494b942e4f6e70bf8f80fa1a3a5223">TextLogger::FmtIndentString</a>).</p>
<p>Furthermore, when building the output using class <a class="el" href="classaworx_1_1lib_1_1strings_1_1ASAlloc.html">AString</a>, simple mechanism to use tabulators and aligned fields are provided. See classes <a class="el" href="classaworx_1_1lib_1_1strings_1_1Format_1_1Tab.html">Format::Tab</a> and <a class="el" href="classaworx_1_1lib_1_1strings_1_1Format_1_1Field.html">Format::Field</a> for more information on this topic.</p>
<h1><a class="anchor" id="tutcpp_end"></a>
Further reading</h1>
<p>This is the end of the tutorial of ALox for C++. You should be able to use the basic features of the ALox logging ecosystem and have nice, formatted, configurable log output in your software projects. ALox puts you in the comfortable position to keep your debug log statements in your code, because you can easily configure not only the verbosity as a global parameter, but for different portions and "domains" of your code separated. When you start editing code that you have not touched for a while, you just can enable the corresponding log domain and restrict others to warnings and errors for a while. Because of the efficient ALox implementation, disabled log domains do not have a relevant impact on the execution of your debug code. As soon as you release your code, debug logging is pruned completly from your binaries.</p>
<p>Probably the most important thing that this tutorial does <b>not</b> cover is release logging. To understand release logging and how debug and release log statements can even be mixed in your projects, some background information on the <a href="../man_alox_architecture.html">ALox architecture</a> and <a class="el" href="cppprepro.html">ALox and the C++ Preprocessor</a> are essential to know.</p>
<p>If however, you just want to start using ALox and get to know more details over time, you should read <a class="el" href="cppsetup.html">IDE/Build system Setup</a> and probably <a class="el" href="group__GrpMacrosDebugLog.html">ALox Macros For Debug Logging</a>.</p>
<p>Finally if you now just want to know all about ALox (e.g. how you can implement your own Logger classes that log to your favorite network logging backend), you can continue reading at the beginning of the <a href="../manual.html">ALox User Manual</a> and of-course also browse the <a href="annotated.html">AWorx class reference</a> pages. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 5 2016 10:23:27 for ALox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
