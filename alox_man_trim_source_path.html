<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ALox: 14 - Trimming Source File Paths and Clickable IDE Output</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALox
   &#160;<span id="projectnumber">V. 1712 R. 0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!--ALox Main Menu-->
<div style="background: #2f3a48; " >
<table  class="aworx-menutable"  >
 <tbody>
 <tr style="height: 36px;">
  <td> <a class="aworx-menu_hl" href="index.html"                                      >Home</a>                        </td>
  <td> <a class="aworx-menu"    href="cpp_ref/alox_cpp_mainpage.html"                   >ALox for C++</a>                </td>
  <td> <a class="aworx-menu"    href="cs_ref/alox_cs_mainpage.html"                     >ALox for C#</a>                 </td>
  <td> <a class="aworx-menu"    href="java_ref/alox_java_mainpage.html"                 >ALox for Java</a>               </td>
  <td> <a class="aworx-menu"    href="https://github.com/AlexWorx/ALox-Logging-Library">Download</a></td>
 </tr>
 </tbody>
</table>
</div>
<!--end ALox Main Menu-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">14 - Trimming Source File Paths and Clickable IDE Output </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#alox_man_trim_source_path_set">1. Source Path Trim Rules</a><ul><li class="level2"><a href="#alox_man_trim_source_path_set_automatic">1.1 Automatic Detection of Trim Rules</a></li>
<li class="level2"><a href="#alox_man_trim_source_path_set_programmatical">1.2 Programmatical Provision of Trim Rules</a></li>
<li class="level2"><a href="#alox_man_trim_source_path_set_config">1.3 Trim Rules Provided by External Configuration Variables</a></li>
<li class="level2"><a href="#alox_man_trim_source_path_set_priorities">1.4 Priorities of Trim Rules</a></li>
<li class="level2"><a href="#alox_man_trim_source_path_set_veryfy">1.5 Verifying Trim Rules</a></li>
<li class="level2"><a href="#alox_man_trim_source_path_set_remove">1.6 Removing Trim Rules</a></li>
</ul>
</li>
<li class="level1"><a href="#alox_man_trim_source_path_scope">2. Considerations in respect to Scope Functionality</a></li>
<li class="level1"><a href="#alox_man_trim_source_path_set_metainfo">3. Considerations in respect to Logging Meta Information</a></li>
</ul>
</div>
<div class="textblock"><p>In C++ and C#, <b>ALox</b> collects information about the source file name and this information by default includes the full file path. This chapter is addressing <b>ALox for C++</b> and <b>ALox for C#</b> users only.</p>
<dl class="section note"><dt>Note</dt><dd>In Java, the <em>Scope</em> information that <b>ALox</b> collects does not include information about the path of source files. Luckily, IDEs (e.g. Eclipse) nevertheless are able to open the right source file when clicking on the meta information automatically collected by <b>ALox</b>.</dd></dl>
<p>To collect the path information, in C++ the preprocessor macro <code>__FILE__</code> is used when invoking <em>Log Statements</em>. In C#, some mechanics of namespace <code>System.Runtime.CompilerServices</code> are leveraged.</p>
<p>The source file name and path information received is used in two ways:</p><ul>
<li>To determine the <em>Scope</em> of a <em>Log Statement</em>. <b>ALox</b> uses this to implement a variety of nice features like <em>Scope Domains</em>, <em>Prefix Logables</em>, <em>Log.Once</em> or <em>Log Data</em>.</li>
<li>For logging out such information and provide the context of a <em>Log Statement</em>. If an IDE supports it this may make log output 'clickable'.</li>
</ul>
<p>Source file paths can become quite long and for different reasons, it might be wanted remove a redundant or irrelevant prefix from the it.</p>
<h1><a class="anchor" id="alox_man_trim_source_path_set"></a>
1. Source Path Trim Rules</h1>
<p>ALox provides a mechanism to trim the path of source files by using a set of rules.</p>
<p>Internally, different lists of such <b>'Source Path Trim Rules'</b> are maintained. One is a static table, which stores trim information used by all instances of class <b>Lox</b>. In addition, each <b>Lox</b> has an own, private set of <em>Source Path Trim Rules</em>. The advantage of having the static, global table is that a user can set 'hints' for trimming the path only once (at bootstrap) and forget about it. All instances of <b>Lox</b> will use it.</p>
<h2><a class="anchor" id="alox_man_trim_source_path_set_automatic"></a>
1.1 Automatic Detection of Trim Rules</h2>
<p>ALox tries to detect trimable portions of a source path automatically. For that, <b>ALox</b> compares the actual path name of the executable of the currently running process with the path of a source file. The prefix both have in common is identified as trimable.</p>
<p>As an example, imagine a process' file name including the path is: </p><pre class="fragment">    /home/lisa/bin/myapp(.exe)
</pre><p>When <b>ALox</b> finds a source file residing in: </p><pre class="fragment">    /home/lisa/dev/myapp/src/ui/dialog.cpp
</pre><p>The trimable prefix of the path would be <em>"/home/lisa/"</em>. Therefore, the trimmed file name would be: </p><pre class="fragment">    dev/myapp/src/ui/dialog.cpp
</pre><p>The result is a more narrow log output which is probably even better readable.</p>
<p>Of-course, it would be even nicer to have </p><pre class="fragment">    ui/dialog.cpp
</pre><p>or alternatively: </p><pre class="fragment">    src/ui/dialog.cpp
</pre><p>Before we learn how we can configure <b>ALox</b> to trim the path like this, let us first better understand when <b>ALox</b> performs the automatic detection described above:</p>
<ul>
<li><b>ALox</b> tries to detect a rule for trimming only <b>once per Lox</b>:<br />
 The reason for this is simply performance. We rather want <b>ALox</b> to be fast instead of trying to detect trim rules with every <em>Log Statement</em>. However, if different subsets of the source code resides in different paths, the path detected becomes random: It depends on the fact which source logs first! And even worse: if no match was found with that first file, no second try is performed.</li>
<li>More precisely, <b>ALox</b> does its one-time detection exactly in the moment a first source file is using a <b>Lox</b> and the path of this file was <em>not</em> processed by an explicitly provided <em>Source Path Trim Rule</em>.</li>
<li>If <b>ALox</b> finds a rule, such rule is stored in the list dedicated to the <b>Lox</b> that found it, not in the global list applicable for all <b>Lox</b> instances. This is why the one-time detection is a one-time detecthion <em>per Lox</em>.</li>
</ul>
<p>As you see, this auto-detection works nicely on small projects with source files kept local and the executable in a 'related' place.</p>
<p>When things become more complex, it is advisable to add <em>Source Path Trim Rule</em> explicitly.</p>
<h2><a class="anchor" id="alox_man_trim_source_path_set_programmatical"></a>
1.2 Programmatical Provision of Trim Rules</h2>
<p>A user of <b>ALox</b> may use method <b>Lox.SetSourcePathTrimRule</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a30d2d3a359e2aba54ed0a53388e90ba0">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a72c8bbc9f4e8c751a7e8920040812a80">C#</a>), to add <em>Source Path Trim Rules</em> explicitly.</p>
<dl class="section note"><dt>Note</dt><dd>For all details, please see the reference documentation corresponding to the programming version you are using as linked above.</dd></dl>
<p>When you reconsider the sample above, explicit setting leads to better results even in simple project. The sample used source file: </p><pre class="fragment">    /home/lisa/dev/myapp/src/ui/dialog.cpp
</pre><p>Now, for a programmatically setting, Lisa invokes</p>
<div class="fragment"><div class="line">    <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.SetSourcePathTrimRule( <span class="stringliteral">&quot;*/myapp/src/&quot;</span>, <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1lang.html#a217539925b78b2eed40ae7817d5bee52">Inclusion</a>.Include );</div></div><!-- fragment --><p> as the very first statement before using <b>ALox</b>. The first parameter tells <b>ALox</b> which string to search. A leading wildcard character <code>'*'</code>, indicates that the path is a substring of the file paths identified (no trailing <code>'*'</code> is needed). The second, optional parameter tells <b>ALox</b> to include the given substring in the trimming. In other words, the substring will be excluded from the trimmed path. In other words: it means "the given portion of the path is included in the trimming action!</p>
<p>Now the trimmed source path leads to </p><pre class="fragment">    ui/dialog.cpp
</pre><p>which is probably what is wanted. As we see, the huge advantages of explicitly setting <em>Source Path Trim Rules</em> is that they do a better job, are independently applied regardless of 'where' the executable is located and that any random behavior of trimming is eliminated.</p>
<dl class="section note"><dt>Note</dt><dd>If the platform (compiler) specific path separator is <code>'/'</code>, then characters <code>'\'</code> found in parameters <code>path</code> and <code>trimReplacement</code> when setting rules are replaced by <code>'\'</code> and vice versa. This allows to specify paths and substrings thereof in a platform independent way. The same is true when rules are defined in external configuration variables, as described later in this chapter.</dd></dl>
<p>It is advisable to use set <em>Source Path Trim Rules</em> at the very start of a process. Even prior to attaching the debug <em>Loggers</em> or custom <em>Loggers</em> to any <b>Lox</b> instances. The reason for the latter is that already attaching a <em>Logger</em> lets class <b>Lox</b> evaluate the <em>Scope</em> and potentially create the internal automatic rule. This auto-rule might be conflicting with a user-given rule but be prioritized due to the fact that it was created prior to the users' rule.</p>
<p>Then, in a multi-threaded application, from the moment on parallel access to two different instances of class <b>Lox</b> are performed, it is not allowed to add 'global' rules, because, for performance reasons, the access to the rules is not protected by a <em>mutex</em>.</p>
<dl class="section note"><dt>Note</dt><dd>Alternatively, all existing instances of class <b>Lox</b> have to be locked 'manually' by invoking <b>Acquire()</b> prior to setting a global rule.</dd></dl>
<p>If multiple <em>Source Path Trim Rules</em> are set, those are applied in their order of creation. The private rules of a <b>Lox</b> are applied first, the global rules afterwards. Only one rule per source path is executed. In other words, as soon as a rule matches and modifies a source path, no further attempts for trimming are performed.</p>
<h2><a class="anchor" id="alox_man_trim_source_path_set_config"></a>
1.3 Trim Rules Provided by External Configuration Variables</h2>
<p>Setting <em>Source Path Trim Rules</em> <em>'from within the source code'</em> is easy and straightforward. However, when working in a team such changes might not be appreciated by other team members. In this and other situations it is advisable to retrieve <em>Source Path Trim Rule</em> from external configuration data, command-line parameters or other sources at runtime.</p>
<p>For <em>Source Path Trim Rules</em> and also other configuration data, <b>ALox</b> leverages the configuration facility provided by underlying utility library <b>ALib</b>.</p>
<dl class="section note"><dt>Note</dt><dd>For general information on <b>ALox</b> configuration variables consult <a class="el" href="group__GrpALoxConfigVars.html">I - Configuration Variables</a>.<br />
 For information on how to pass configuration data from custom sources to <b>ALox</b>, refer to namespace documentation <b>aworx::lib::config</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1config.html">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lib_1_1config.html">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/namespacecom_1_1aworx_1_1lib_1_1config.html">Java</a>).</dd></dl>
<p>When an instance of class <b>Lox</b> is constructed, two a configuration variables are tried to be read:</p><ul>
<li><code>ALOX_GLOBAL_SOURCE_PATH_TRIM_RULES</code>.</li>
<li><code>ALOX_LOXNAME_SOURCE_PATH_TRIM_RULES</code>. </li>
</ul>
<p>The first is for defining global rules. The second variable is specific to a named <b>Lox</b> and the substring <code>'LOXNAME'</code> needs to be replaced by the name of the <b>Lox</b> in question.</p>
<p>Otherwise, the format of the variables are the same and the following description applies to both.</p>
<p>The variable may contain a list of <em>Source Path Trim Rules</em> separated by semicolons <code> ';'</code>. Each rule consists of four values, separated by colons <code> ','</code>. The four values correspond to the first four parameters of method <b>Lox.SetSourcePathTrimRule</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a30d2d3a359e2aba54ed0a53388e90ba0">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a72c8bbc9f4e8c751a7e8920040812a80">C#</a>). The same as parameter 3 (<code>trimOffset</code>) and 4 (<code>sensitivity</code>) are optional with method <b>Lox.SetSourcePathTrimRule</b>, providing them in the configuration variable is optional as well.</p>
<p>As an example, an INI file of an application might have the following sub-section:</p>
<div class="fragment"><div class="line">[<a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#a29a365204e34e80d57694cfaae9df933">ALOX</a>]</div><div class="line">GLOBAL_SOURCE_PATH_TRIM_RULES= *src.cs/                  , true                ; \</div><div class="line">                               /usr/local/lib/  , <span class="keyword">false</span>, 9, <span class="keyword">true</span>, /usr/lib/</div></div><!-- fragment --><p> This would install two rules. Note that values of parameters 2 and 4, which in the method declaration carry enum types <b>Inclusion</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1lang.html#a217539925b78b2eed40ae7817d5bee52">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lib_1_1lang.html#a217539925b78b2eed40ae7817d5bee52">C#</a>) and <b>Case</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1lang.html#ab9aab17a5e54a8bae6915bc24db13a17">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lib_1_1lang.html#ab9aab17a5e54a8bae6915bc24db13a17">C#</a>), in the INI file are expressed by boolean values as follows:</p>
<ul>
<li><code>Inclusion::Include</code> == <code>true</code>, <code>Inclusion::Exclude</code> == <code>false</code> </li>
<li><code>Case::Sensitive</code> == <code>true</code>, <code>Case::Ignore</code> == <code>false</code> </li>
</ul>
<h2><a class="anchor" id="alox_man_trim_source_path_set_priorities"></a>
1.4 Priorities of Trim Rules</h2>
<p>Different trim rules might be redundant or even contradict each other. Therefore the rules are equipped with a priority. Rules with higher priority are applied first. Once a rule matches, no further rule is applied. The priority is an integer value and is lent from the <b>ALib</b> system for external configuration variables. It is are set as follows:</p><ul>
<li>In the case that a rule is read from an external configuration variable, the priority value is set to the priority value of the configuration plug-in that provided the variable.</li>
<li>In the case that the rule is set from within the source code, the priority is taken from optional parameter <code>priority</code> of method <b>Lox.SetSourcePathTrimRule</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a30d2d3a359e2aba54ed0a53388e90ba0">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a72c8bbc9f4e8c751a7e8920040812a80">C#</a>) which defaults to <b>Priorities::DefaultValues</b> <a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1config.html#a4f738b6463e8c773284e5173741814dd">(C++)</a> respectively <b>Configuration::PrioDefaultValues</b> <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#acc96dac6a4ac6625c609dae85ed53e0e">(C#)</a>.</li>
<li>Rules that are automatically detected have a priority of <b>Configuration.PrioAutodetect</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1config.html#a4f738b6463e8c773284e5173741814ddaa439cc535cfa5d7f3f2def352e2255b0">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#ab092b4bf4ab5c2cc772271e61ea3bda4">C#</a>).</li>
</ul>
<p><b>Configuration.PrioDefaultValues</b> is a lower priority than (the default) priorities of the configuration plug-ins. Therefore, the configuration variables by default <b>overrule</b> what is hard-coded as a <em>Source Path Trim Rule</em>.<br />
 To change this behavior, any other priority may be specified in the source code, especially the pre-defined value of <b>Priorities::DefaultValues</b> <a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1config.html#a4f738b6463e8c773284e5173741814dd">(C++)</a> respectively <b>Configuration::PrioDefaultValues</b> <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lib_1_1config_1_1Configuration.html#acc96dac6a4ac6625c609dae85ed53e0e">(C#)</a>. It allows the user to give the rule set in the source code the highest priority and this way to protect the rule from external manipulation.</p>
<dl class="section note"><dt>Note</dt><dd>For general information about accessing external configuration data with <b>ALib</b> see documentation of namespace <b>[cs.]aworx.lib.config</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1config.html">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lib_1_1config.html">C#</a>).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The priority scheme used here is similar to what is described for <em>Verbosity</em> settings in chapter <a class="el" href="alox_man_external_verbosity_configuration.html">13 - External Verbosity Configuration</a>.</dd></dl>
<h2><a class="anchor" id="alox_man_trim_source_path_set_veryfy"></a>
1.5 Verifying Trim Rules</h2>
<p>With most methods invoked on class <b>Lox</b>, internal log messages are provided (See <a class="el" href="alox_man_internal_domains.html">11 - Internal Logging</a>). When setting <em>Source Path Trim Rules</em>, this is <b>not</b> the case. The rational here is, that in most cases no <em>Logger</em> is attached to the <b>Lox</b> attached, yet. If something goes wrong with source path trimming, e.g. when you are not sure if a rule was read from external configuration variables, you can use method <b>Lox.State</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a8396987d83aaa22cb36dad2d9d2254dd">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a801d9784fa14e309a1889fd0afb09a36">C#</a>) to dump out the current state of a <b>Lox</b>. Besides rules set programmatically or using configuration variables, if exists, also the auto-generated rule is displayed. </p><dl class="section note"><dt>Note</dt><dd>As an alternative to (temporarily) adding an invocation of <b>Lox.State</b> to your code, <b>ALox</b> provides configuration variable <a href="group__GrpALoxConfigVars.html">ALOX_LOXNAME_DUMP_STATE_ON_EXIT</a>. This allows to enable an automatic dump of the state using a command line parameter or other external configuration sources.</dd></dl>
<h2><a class="anchor" id="alox_man_trim_source_path_set_remove"></a>
1.6 Removing Trim Rules</h2>
<p>In very special situations (e.g. <b>ALox</b> uses it for unit testing) method <b>Lox.ClearSourcePathTrimRules</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a197f9ceb9fba85ebe74a375f0c3dc29c">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a5bee8ab6b333b153c8fd4408e3984f14">C#</a>), can be used to clear the rules of a <b>Lox</b> instance, optionally including all global rules.</p>
<dl class="section note"><dt>Note</dt><dd>This method can also be used <em>prior</em> to invoking <b>Lox.SetSourcePathTrimRule</b> to suppress the creation of the automatic rule. Of-course, this has to be done for every instance of class <b>Lox</b> in question, because the automatic rule and its creation is local to the each <b>Lox</b>.</dd></dl>
<h1><a class="anchor" id="alox_man_trim_source_path_scope"></a>
2. Considerations in respect to Scope Functionality</h1>
<p>The benefits of having <b>ALox</b> using reduced length source file paths in consideration to <em>Scopes</em> is in respect to performance. All data associated with language-related <em>Scopes</em> is stored and retrieved in hash-tables with keys containing the source path.<br />
 Furthermore, the output of method <b>Lox.State</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a8396987d83aaa22cb36dad2d9d2254dd">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a801d9784fa14e309a1889fd0afb09a36">C#</a>), might be better readable with these shorter paths.</p>
<p>It is also important to consider that when using <em><a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6aac70412e939d72a9234cdebb1af5867b">Scope.Path</a></em>, especially if increased by an amount of addressed parent directories, the source path must not be trimmed more than such use suggests. When the files are sorted in nested directories according to the nested namespace structure implemented in the files, then the directory prior to the tree of namespace directories should be included in the trimmed path.</p>
<h1><a class="anchor" id="alox_man_trim_source_path_set_metainfo"></a>
3. Considerations in respect to Logging Meta Information</h1>
<dl class="section note"><dt>Note</dt><dd>This section is about textual logging with the use of <em>Loggers</em> derived from class <b>TextLogger</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1core_1_1textlogger_1_1TextLogger.html">C#</a>), provided with <b>ALox</b>. For other <em>Loggers</em>, other considerations might apply.</dd></dl>
<p>Due to the rich meta information that <b>ALox</b> provides, the log output lines quickly become quite wide. Therefore, trimming the path of source files in the log output to a level that still allows to distinguish all files properly, can help a lot to reduce such width.</p>
<p>Class <b>MetaInfo</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1core_1_1textlogger_1_1MetaInfo.html">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1core_1_1textlogger_1_1MetaInfo.html">C#</a>), with its instance found in every ALox <b>TextLogger</b>, provides a format string to structure the meta info. For the source path, two format parameters exists:</p><ul>
<li><b>SP</b>: Provides the full path name</li>
<li><b>Sp</b>: Provides the trimmed path name</li>
</ul>
<p>Directly from the log-output you can observe how trimming is performed by <b>ALox</b> and whether there is the need to add a trimming rule explicitly.</p>
<p>However, those IDEs which recognize certain patterns and allow to automatically link these patterns with the source file in their editor, sometimes need to see the full path name or a certain part of it. To adjust <b>ALox</b> to your IDE, you might have to play around a little. If your IDE supports clickable output lines, you might want to change the format of the meta info to match the pattern that your IDE requires.</p>
<dl class="section note"><dt>Note</dt><dd>In documentation page <a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/alox_cpp_setup.html">IDE Setup for ALox for C++</a> and <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/alox_cs_setup.html">IDE Setup for ALox for C#</a>, detailed instructions for selected platforms and IDEs are given.</dd></dl>
<p>Certain build systems/compilers might not provide the absolute path information in certain situations. In contrast, they might provide source directories in relative addressing in respect to a project file. This is at least true for C++. If then the IDE does not recognize the right origin of a relative path, this path needs correction to be absolute. ALox provides a feature to do such correction. An optional parameter of method <b>Lox.SetSourcePathTrimRule</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a30d2d3a359e2aba54ed0a53388e90ba0">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a72c8bbc9f4e8c751a7e8920040812a80">C#</a>) allows to specify a replacement string for what is cut by a rule. (This replacement string can of-course also be set using the configuration variables described in <a class="el" href="alox_man_trim_source_path.html#alox_man_trim_source_path_set_config">1.3 Trim Rules Provided by External Configuration Variables</a>.) Sometimes it might be needed to "fiddle around" with the options of the trim rules and the format of the <b>TextLogger</b> output, until finally your IDE recognizes the source information correctly. But once succeeded, it proofs being worth the effort!</p>
<p>When you are sure, that your IDE does not support the links to the editor, then you're unfortunate and your way to go is displaying a (best possible) trimmed path, to reduce overall log output width. </p><hr/>
 <center>Next chapter: <a class="el" href="alox_man_domain_substitution.html">15 - Log Domain Substitution</a> </center> <center> <a class="el" href="manual.html">Back to index</a> </center> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 22 2017 22:23:19 for ALox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
<!-- Start of StatCounter Code e -->
<script type="text/javascript">
var sc_project=11242602;
var sc_invisible=1;
var sc_security="5ac13373";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web statistics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11242602/0/5ac13373/1/" alt="web
statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>
