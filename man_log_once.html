<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ALox: 06 - Lox.Once()</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALox
   &#160;<span id="projectnumber">V. 1702 R. 0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!--ALox Main Menu-->
<div style="background: #2f3a48; " >
<table  class="aworx-menutable"  >
 <tbody>
 <tr style="height: 36px;">
  <td> <a class="aworx-menu_hl" href="index.html"                  >Home</a>                        </td>
  <td> <a class="aworx-menu"    href="cpp_ref/cppmainpage.html"    >ALox for C++</a>                </td>
  <td> <a class="aworx-menu"    href="cs_ref/csmainpage.html"      >ALox for C#</a>                 </td>
  <td> <a class="aworx-menu"    href="java_ref/javamainpage.html"  >ALox for Java</a>               </td>
  <td> <a class="aworx-menu"    href="https://github.com/AlexWorx/ALox-Logging-Library">Download</a></td>
 </tr>
 </tbody>
</table>
</div>
<!--end ALox Main Menu-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">06 - <a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a6461dec7c62cad4cb618ac730bac95a9">Lox.Once()</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#man_logonce_intro">1. Introduction</a></li>
<li class="level1"><a href="#man_logonce_grouping">2. Grouping</a></li>
<li class="level1"><a href="#man_logonce_scopes">3. Log.Once and Scopes</a></li>
<li class="level1"><a href="#man_logonce_gs_combined">4. Combining Groups and Scopes</a></li>
<li class="level1"><a href="#man_logonce_multiple_logables">5. Passing Multiple Logables To Lox.Once</a></li>
<li class="level1"><a href="#man_logonce_wrapup">6. Wrap-Up</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="man_logonce_intro"></a>
1. Introduction</h1>
<p>For a better understanding of what is explained in this chapter, it might be advisable to have read chapter <a class="el" href="man_scopes.html">05 - Scopes in ALox</a> before continuing with this one. In short, at that place it is explained how ALox defines language-related <em>Scopes</em> (including the 'global' <em>Scope</em>) and thread-related <em>Scopes</em>. Both types are 'interwoven' and form the complete set, as denoted in enum-class <b>Scope</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/enumcom_1_1aworx_1_1lox_1_1Scope.html">Java</a>).</p>
<p>The most important use of <em>Scopes</em> in ALox is for setting and using <em>Scope Domains</em> which helps sorting and controlling the log output tremendously. Further information on this topic is found in chapter <a class="el" href="man_logdomains.html">04 - Log Domains</a>. This chapter provides details about a feature that we simple call <b>Lox.Once</b>.</p>
<p>Using ALox, you have probably come across method <b>Lox.Once</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a6461dec7c62cad4cb618ac730bac95a9">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#adf12d740a5c327f144757d7893af1374">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html#a7347b1bdc9a7abe966bd812190f54db8">Java</a>), with its various parameters and overloaded versions which omit and default the parameters.</p>
<p>As the name indicates, this method is used to execute a <em>Log Statement</em> only once. A first use case of such a <em>Log Statement</em> is obvious: Whenever it is interesting to know whether a piece of code was executed at least <em>once</em>, this <em>Log Statement</em>:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;Kilroy was here!&quot;</span> );</div></div><!-- fragment --><p> is the one to go. No further (debug) code needs to be added and pruned using <code>#if</code> / <code>#endif</code> clutter. Its nice and readable, just as <em>Log Statements</em> should be.</p>
<dl class="section note"><dt>Note</dt><dd>The samples in this chapter showcases ALox for C#. With the other language implementations the code looks very similar. With Java, due to a lack of the language in respect to resolving (quite easily resolvable!) overloading ambiguities, there might be less options to omit parameters and some variants have a slightly different order in the parameters.</dd></dl>
<p>The concept of method <b>Log.Once</b> goes quite beyond this simple sample. Before we go to the real interesting things, lets first quickly introduce other parameters that are optional to all other variations of this method:</p><ul>
<li><p class="startli">As with all <em>Log Statements</em>, a <b>domain path</b> can be given:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;IO&quot;</span>, <span class="stringliteral">&quot;Directory given in config.ini not found. Using default.&quot;</span> );</div></div><!-- fragment --><p> By the way: this sample output above indicates a next use case besides the one asking for "was a piece of code reached once". The sample logs a fact that will not change in the future (The configuration file "config.ini" is how it is, its just wrong). The sample indicates, that a default directory was chosen. This will be done all the time the method is used but it is logged out only once.</p>
</li>
<li><p class="startli">To avoid the definition of even a bigger set of overloaded methods in class <b>Lox</b> (e.g. they could have been named <em>Log.ErrorOnce</em> or <em>Log.WarningOnce</em>), the <b>Verbosity</b> is provided as a parameter and defaults to <a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313a4059b0251f66a18cb56f544728796875">Verbosity.Info</a>. If a different <em>Verbosity</em> is to be chosen, use:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;IO&quot;</span>, <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313">Verbosity</a>.Warning, <span class="stringliteral">&quot;I warn you... and I don&#39;t repeat myself!&quot;</span> );</div></div><!-- fragment --><p> At this point in time, it might be worth to mention, that the counter is increased with each <b>Log.Once</b> statement independently from the <em>Verbosity</em> setting of the effective <em>Log Domain</em> such statement is associated with. In other words, even if the domain was switched off (using <b><a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313ad15305d7a4e34e02489c74a5ef542f36">Verbosity.Off</a></b>), the counter is still increased. On the same token, if more than one <em>Logger</em> (or none) is attached to the <b>Lox</b>, still the counter is increased by exactly <code>1</code>.</p>
</li>
<li><p class="startli">Then, although the method is named 'Once', parameter <code>quantity</code> allows to specify a different number of occurrences:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;This is logged 10 times. After that, never again.&quot;</span>, 10 );</div></div><!-- fragment --></li>
<li><p class="startli">Finally setting the parameter to a negative value, lets ALox perform the log the first time it is invoked and after that, every n-th time (to be precise, every (-quantity)-th time).</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;This is logged the first time and then every 100th invocation.&quot;</span>, -100 );</div></div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="man_logonce_grouping"></a>
2. Grouping</h1>
<p>In the introduction we have seen use cases like:</p><ul>
<li>Is a certain piece of code reached?</li>
<li>A log message results from a non-changeable fact, and hence it should only be logged once.</li>
</ul>
<p>These and similar use cases are now extended from concerning <em>one</em> log message to <em>a set of</em> log messages. Let us Stick to the sample with the mis-configured config.ini:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;IO&quot;</span>, <span class="stringliteral">&quot;Directory given in config.ini not found. Using default.&quot;</span> );</div></div><!-- fragment --><p> This might be observed in two methods: when data is written or when it is read:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> ReadData()</div><div class="line">{</div><div class="line">    <span class="comment">//...</span></div><div class="line"></div><div class="line">    <span class="comment">// directory not found</span></div><div class="line">    <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;IO&quot;</span>, <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313">Verbosity</a>.Warning,</div><div class="line">              <span class="stringliteral">&quot;Directory given in config.ini not found. Using default.&quot;</span> );</div><div class="line">    <span class="comment">//...</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> WriteData()</div><div class="line">{</div><div class="line">    <span class="comment">//...</span></div><div class="line"></div><div class="line">    <span class="comment">// directory not found</span></div><div class="line">    <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;IO&quot;</span>, <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313">Verbosity</a>.Warning,</div><div class="line">              <span class="stringliteral">&quot;Directory given in config.ini not found. Using default.&quot;</span> );</div><div class="line">    <span class="comment">//...</span></div><div class="line">}</div></div><!-- fragment --><p> While this works well and we could be happy as it is, the little drawback here, is that, if both methods get executed, each <em>Log Statement</em> is executed once and hence, this sums up to two. For a debug-log output on a IDE console, this is not really dramatic. But there are other usage scenarios of logging (logging to a system journal, logging over the air, etc.) where ALox should be asked to avoid this.</p>
<p>And it can be very easily avoided:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> ReadData()</div><div class="line">{</div><div class="line">    <span class="comment">//...</span></div><div class="line"></div><div class="line">    <span class="comment">// directory not found</span></div><div class="line">    <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;IO&quot;</span>, <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313">Verbosity</a>.Warning,</div><div class="line">              <span class="stringliteral">&quot;Directory given in config.ini not found. Using default.&quot;</span>,</div><div class="line">              <span class="stringliteral">&quot;INI_DIR_ERROR&quot;</span> );</div><div class="line">    <span class="comment">//...</span></div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> WriteData()</div><div class="line">{</div><div class="line">    <span class="comment">//...</span></div><div class="line"></div><div class="line">    <span class="comment">// directory not found</span></div><div class="line">    <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;IO&quot;</span>, <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313">Verbosity</a>.Warning,</div><div class="line">              <span class="stringliteral">&quot;Directory given in config.ini not found. Using default.&quot;</span>,</div><div class="line">              <span class="stringliteral">&quot;INI_DIR_ERROR&quot;</span> );</div><div class="line">    <span class="comment">//...</span></div><div class="line">}</div></div><!-- fragment --><p> We provide optional parameter <code>group</code>, both valued <em>"INI_DIR_ERROR"</em>. Because both log statements share the same <em>Group</em> <em>'key'</em>, ALox shares its internal counter for the number of already performed logs between them.</p>
<dl class="section note"><dt>Note</dt><dd>Of-course, such <em>Group</em> keys do not need to be registered and their use is not limited. As always, ALox just manages internally what the user feeds in. Even if parameter <code>quantity</code> is provided and it differs between <b>Log.Once</b> statements that belong to the same group, ALox does what you might expect:<ul>
<li>The counter is shared and increased with each executed (!) statement.</li>
<li>Each <b>Log.Once</b> statement checks the counter against what is provided with <code>quantity</code>. In other words: While one statement of a group may be already disabled, others might continue logging. Please do not ask us for a use case of this!</li>
</ul>
</dd></dl>
<p>In summary, parameter <code>group</code> is used to group a number of <b>Log.Once</b> statements which are located in an arbitrary places of a software together and count the number of overall executed logs.</p>
<p>For a short time, this is all to know about using <em>Groups</em>. But we will come back to <em>Groups</em> after the next section.</p>
<h1><a class="anchor" id="man_logonce_scopes"></a>
3. Log.Once and Scopes</h1>
<p>Instead of 'grouping' a set of <em>Log.Once</em> statements by manually assigning them a group name, ALox <em>Scopes</em> can 'automatically' group statements which in a 'natural' way belong together. If the methods <b>ReadData</b> and <b>WriteData</b> from the previous sample reside in the same source file (In Java <em>class</em>, in C++/C# source file), the very same that was achieved using <em>Groups</em>, can be achieved using <em>Scopes:</em> </p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyIOManager</div><div class="line">{</div><div class="line">    <span class="comment">// static constructor</span></div><div class="line">    <span class="keyword">static</span> MyIOManager()</div><div class="line">    {</div><div class="line">        <span class="comment">// bind all log statements of this file to domain path &#39;IO&#39;</span></div><div class="line">        <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.SetDomain( <span class="stringliteral">&quot;IO&quot;</span>, <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6">Scope</a>.Filename );</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> ReadData()</div><div class="line">    {</div><div class="line">        <span class="comment">//...</span></div><div class="line"></div><div class="line">        <span class="comment">// directory not found</span></div><div class="line">        <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313">Verbosity</a>.Warning,</div><div class="line">                  <span class="stringliteral">&quot;Directory given in config.ini not found. Using default.&quot;</span>,</div><div class="line">                  <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6">Scope</a>.Filename );</div><div class="line">        <span class="comment">//...</span></div><div class="line">    }</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> WriteData()</div><div class="line">    {</div><div class="line">        <span class="comment">//...</span></div><div class="line"></div><div class="line">        <span class="comment">// directory not found</span></div><div class="line">        <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#abf3be10d03894afb391f3a2935e3b313">Verbosity</a>.Warning,</div><div class="line">                  <span class="stringliteral">&quot;Directory given in config.ini not found. Using default.&quot;</span>,</div><div class="line">                  <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6">Scope</a>.Filename );</div><div class="line">        <span class="comment">//...</span></div><div class="line">    }</div><div class="line"></div><div class="line">} <span class="comment">// class</span></div></div><!-- fragment --><p> Comparing the samples, it can be observed, that parameter <code>group</code> of type <em>String</em> was replaced by parameter <code>scope</code> of type <b>Scope</b>, with value <b><a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6a1351017ac6423911223bc19a8cb7c653">Scope.Filename</a></b>. For other possible values, see <a class="el" href="man_scopes.html">05 - Scopes in ALox</a>.</p>
<p>From a birds' perspective, the advantages of <em>Scopes</em> are:</p><ul>
<li>No need to 'invent' a group name and no risk of accidentally using the same name twice (e.g. in a library that a user does not even have access to).</li>
<li>No need to double-check what <em>Group</em> key was used with other statements in the set.</li>
<li>Copy and pasting of the <em>Log Statements</em> (into a different <em>Scope</em>), 'automatically' adjust the 'grouping key'.</li>
</ul>
<p>Their biggest disadvantage: There is only one <b>Log.Once</b> counter per <em>Scope</em>. The sample above does not support two different sets of methods that independently from each other get counted.</p>
<p>On the other hand, the advantage of <em>Groups</em> is: Statements from completely different <em>Scopes</em> can be grouped and there is an unlimited number of <em>Groups</em> possible.</p>
<p>There is one thing, that can only be achieved with <em>Scopes</em> and this is when using <b><a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6a1ee3f312b05c55202500569aadfc8d9b">Scope.ThreadOuter</a></b> or <b><a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6ae46b159c990fae9e712309bdb4d7b7c4">Scope.ThreadInner</a></b>. This attaches the <b>Log.Once</b> counter to a thread that is executing one of the statements. This opens the new use case for ALox:</p><ul>
<li>Log one or one set of messages, up to n-times per execution thread.</li>
</ul>
<p>As we see, both variants have their proper use case and both have advantages and disadvantages. Why not combining them?</p>
<h1><a class="anchor" id="man_logonce_gs_combined"></a>
4. Combining Groups and Scopes</h1>
<p>The parameter list of <b>Lox.Once</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a6461dec7c62cad4cb618ac730bac95a9">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#adf12d740a5c327f144757d7893af1374">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html#a7347b1bdc9a7abe966bd812190f54db8">Java</a>), and some of its overloaded variants, allow to provide both, a <em>Group</em> name and a <em>Scope</em>. To understand the consequence, its best to explain how ALox internally handles <em>Groups</em>.<br />
 <em>Groups</em> of-course are implemented with hash-tables. Their key is a <em>String</em>, the <em>Group</em> name, and their value contains the counter. Now, ALox (to be precise, class <b>Lox</b>), creates a hash-table for <em>Group</em> keys for each 'instance of a scope' where <b>Log.Once</b> is used.<br />
 When parameter <code>scope</code> is omitted with <b>Log.Once</b>, it simply defaults to <em>Scope.Global</em>, which is, as explained in <a class="el" href="man_scopes.html">05 - Scopes in ALox</a>, a singleton for each <b>Lox</b>. Consequently, each and every statement belongs to <em>Scope.Global</em> and this is why <em>Groups</em> of default <em>Scope.Global</em> seem to work independently from any scope.<br />
 The other way round, if parameter <code>group</code> is omitted, then there are two options for ALox: If parameter <code>scope</code> is given and is not equal to <em>Scope.Global</em>, then ALox uses a default <em>Group</em> key. Because this is the same for all such invocations, the statement is bound to the given <em>Scope</em> and to nothing else. In the second case, when <em>Scope.Global</em> is given (still with no <em>Group</em>), ALox switches to <em>Scope.Filename</em> (In Java <em>Scope.CLASS</em>) and creates the <em>Group</em> key from the line number of the invocation. This way, the 'parameterless' invocation of <b>LogOnce</b>, results in binding the counter exclusively to this single <b><a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a6461dec7c62cad4cb618ac730bac95a9">Lox.Once</a></b> statement.</p>
<p>The truth therefore is, that ALox always combines <em>Groups</em> and <em>Scopes</em>, we just have not noticed that, yet. After having understood this, the only question is: What new use cases do we get when using <em>Groups</em> with <em>Scopes</em> other than <em>Scope.Global</em>? So far, we had:</p>
<ul>
<li>Is a certain piece of code reached?</li>
<li>Don't spoil my log-output, so stop after n-messages of the same type.</li>
<li>A log message results from a non-changeable fact, and hence it should only be logged once.</li>
<li>A set of log messages result from a non-changeable fact, and hence only one of them should be logged once (or together n-times).</li>
<li>Log one or a set of messages, up to n-times per execution thread.</li>
</ul>
<p>With using <em>Groups</em> in <em>Scopes</em> other than <em>Scope.Global</em> all of the above get combined and a little more. Just for example:</p>
<ul>
<li>Log only the first n statements which belong to the same group and are placed within any method of<ul>
<li>a source file (in Java a class)</li>
<li>a directory of source files (in Java a package)</li>
<li>a parent directory of source files and all sources recursively (in Java an outer package)</li>
</ul>
</li>
<li>Log only the first n statements of a group of statements executed by a specific thread.</li>
<li>Have an arbitrary number of different <em>Groups</em> of Log.Once statements per Thread.</li>
</ul>
<p>It is up to the reader of this manual and user of ALox to adopt his/her own use cases to this list.</p>
<h1><a class="anchor" id="man_logonce_multiple_logables"></a>
5. Passing Multiple Logables To Lox.Once</h1>
<p>Unlike other methods of class <b>Lox</b> that comprise <em>Log Statements</em> which accept an arbitrary amount of logables, method <b>Once</b> and its overloaded variants accept only one object. This restriction is caused by the otherwise complicated set of parameters and overloads of this method. There is an easy way out!</p>
<p>To supply more than one <em>Logable</em>, in C++ a container of type <a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lib_1_1boxing_1_1Boxes.html">Boxes</a> may be passed with parameter <code>logables:</code> </p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/group__GrpMacrosDebugLog.html#ga68c8af8941a64be4f6e075ab31c6c05b">Log_Once</a>( <a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lib_1_1boxing_1_1Boxes.html">Boxes</a>(<span class="stringliteral">&quot;One - {} - {}!&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, 3 ) );</div></div><!-- fragment --><p> In C# and Java versions, a simple <code>Object</code>[] can be created on the fly. For C# this looks as follows:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="keyword">new</span> Object[] {<span class="stringliteral">&quot;One - {} - {}!&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, 3}  );</div></div><!-- fragment --><p> and the very same in JAVA:</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.once( <span class="keyword">new</span> Object[] {<span class="stringliteral">&quot;One - {} - {}!&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, 3}  );</div></div><!-- fragment --><h1><a class="anchor" id="man_logonce_wrapup"></a>
6. Wrap-Up</h1>
<p>Some combinations of <em>Scope</em> 'levels' and using <em>Groups</em> probably do not make too much sense. For example: Grouping different <b>LogOnce</b> statements together within <em>Scope.Method</em>? Well, you rather think about splitting a huge method into a bunch of smaller ones, as your method seems to have become a little complex.</p>
<p>If this gets all to complicated for you being new to ALox, here are some hints:</p><ul>
<li>Just don't overuse the combination of <em>Groups</em> and <em>Scopes</em> with <b>Log.Once</b>. You will probably get along without any of it! A simple: <div class="fragment"><div class="line"><a class="codeRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Log.html">Log</a>.Once( <span class="stringliteral">&quot;This is what happened: ...&quot;</span> );</div></div><!-- fragment --> is mostly what is needed for debug-logging.</li>
<li>Like with other features of ALox, if parameters are omitted, you don't even see the more complex options and you are not bothered too much. See <a class="el" href="man_apdx_auto_config.html">II - ALox Auto-Configuration and Orthogonality</a> for a summary of this.</li>
<li>If, especially in decent release-logging scenarios, a more complex setup troubles you, switch on ALox internal logging and see exactly what is happening where, when and why! Information on how to do this is found in <a class="el" href="man_internal_domains.html">11 - Internal Logging</a>.</li>
</ul>
<hr/>
 <center>Next chapter: <a class="el" href="man_prefix_logables.html">07 - Prefix Logables</a> </center> <center> <a class="el" href="manual.html">Back to index</a> </center> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 6 2017 09:12:53 for ALox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
<!-- Start of StatCounter Code e -->
<script type="text/javascript">
var sc_project=11242602;
var sc_invisible=1;
var sc_security="5ac13373";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web statistics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11242602/0/5ac13373/1/" alt="web
statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>
