<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ALox: Differences of Debug- and Release-Logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!-- so strange, that doxgen does not highlight each menu item. Just some... -->
<script>
  $(document).ready(function() {     
    fnameStart= window.location.href.lastIndexOf('/')
    fnameEnd=   window.location.href.indexOf('_', fnameStart )
    if( fnameEnd < 0 ) {
        fnameEnd=   window.location.href.indexOf('.', fnameStart )
    }
    if( fnameEnd > -1 ) {
        subString= window.location.href.substring( fnameStart, fnameEnd )
        $('li').toArray().forEach(function(li){
            if(     typeof li.firstChild.href != 'undefined'
                &&  li.firstChild.href.indexOf(subString) > 0 
                ){
               li.classList.add('current');
            }
        });
    }
  });
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALox
   &#160;<span id="projectnumber">V. 1602 R. 1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>ALox&#160;Home</span></a></li>
      <li><a href="faq.html"><span>FAQ</span></a></li>
      <li><a href="manual.html"><span>Manual</span></a></li>
      <li><a href="cpp_ref/cppmainpage.html"><span>ALox&#160;for&#160;C++</span></a></li>
      <li><a href="cs_ref/csmainpage.html"><span>ALox&#160;for&#160;C#</span></a></li>
      <li><a href="java_ref/javamainpage.html"><span>ALox&#160;for&#160;Java</span></a></li>
      <li><a href="tools.html"><span>Tools</span></a></li>
      <li><a href="https://github.com/AlexWorx/ALox-Logging-Library"><span>Download</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Differences of Debug- and Release-Logging </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The ALox <b>tutorials</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/cpptutorial.html">C++</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/cstutorial.html">C#</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/javatutorial.html">JAVA</a>) and most sample code provide information about <em>debug logging</em>. The main goal of this chapter is to explain how to implement <em>release logging</em>. This might be easiest to explain when comparing both types of logging and listing the differences. (For a general definition see <a class="el" href="faq.html#faq_debug_vs_release_logging">What do the terms "debug logging" and "release logging" mean?</a>).</p>
<p>As previous chapters described, any logging with ALox is roughly performed as follows:</p><ul>
<li>A dedicated instance of class <b>Lox</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/classaworx_1_1lox_1_1Lox.html">C++</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html">C#</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html">JAVA</a>) is created.</li>
<li>This <b>Lox</b> object is configured, mainly by populating it with one or more <em>Loggers</em> which get <em>log domain levels</em> set for different <em>log domains</em>.</li>
<li>Then, anywhere in the source code, <em>log statements</em> which perform the logging exclusively through the interface of that dedicated object of class <b>Lox</b> are inserted.</li>
</ul>
<h2>Debug Logging</h2>
<p>Now, with <em>debug logging</em>, there are some specialties that do not apply in release logging:</p><ol type="1">
<li>A dedicated, pre-created, static object of class <b>Lox</b> is provided for the purpose of <em>debug logging</em>, which is publicly accessible from virtually anywhere in the code (including external library components).</li>
<li>For being able to <b>prune</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/cppprepro.html#cppprepro_macros">C++</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/cspruning.html">C#</a> and <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/javasetup.html#javasetup_pruning">Java</a>) <em>debug logging</em> statements from the code, the interface to this dedicated <b>Lox</b> singleton is slightly different than just using the interface of the <b>Lox</b> object itself:<ul>
<li>in Java and C# Versions of ALox, class <b>Log</b> is wrapping all access to the dedicated, static 'debug Lox' by mimicking the interface methods of class <b>Lox</b>. All interface methods that are copied are the same in respect to method names and parameters, the only difference is that they are static and just forward the parameters to the static debug-Lox object.</li>
<li>In C++, an own set of preprocessor macros each type of logging exist (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/group__GrpMacrosDebugLog.html">ALox Macros For Debug Logging</a> and <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/group__GrpMacrosReleaseLog.html">ALox Macros For Release Logging</a>). The almost only difference is, that those macros used for <em>debug logging</em> (that log into the debug-Lox singleton and get pruned in release compilations), are prefixed <em>Log_</em>, while those that are used for release logging are prefixed <em>Lox_</em>.</li>
</ul>
</li>
<li>For convenience, ALox does not only provide a pre-configured <b>Lox</b> singleton for <em>debug logging</em>, but it also creates an appropriate debug logger (or even two of them for certain IDEs) in the case that no other <em>Logger</em> was explicitly created prior to invoking the first log call.<br />
 This way, ALox allows to just start using <em>debug logging</em> with no <em>'bootstrap efforts'</em> as shown in <b>Tutorial: Hello ALox</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/cpptutorial.html">C++</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/cstutorial.html">C#</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/javatutorial.html">JAVA</a>)..</li>
</ol>
<h2>Release Logging</h2>
<p>From the previous discussion about the specialties of <em>debug logging</em>, we can now quite easily identify how release logging differs and derive a guideline on how to implement it:</p>
<ol type="1">
<li>An object of type <b>Lox</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/classaworx_1_1lox_1_1Lox.html">C++</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html">C#</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html">JAVA</a>) has to be created. (In more complex scenarios two or even more of such objects might be created and used for different use cases of <em>release logging</em>.)<br />
 It has to be assured that each code entity that should be enabled perform <em>release logging</em> on this <b>Lox</b> object has propper access to it.</li>
<li>One or more objects of (abstract) type <b>Logger</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/classaworx_1_1lox_1_1core_1_1Logger.html">C++</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/classcs_1_1aworx_1_1lox_1_1core_1_1Logger.html">C#</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/classcom_1_1aworx_1_1lox_1_1core_1_1Logger.html">JAVA</a>) have to be created and attached to the release-Lox object(s), usually with setting the right <em>domain levels</em> for different <em>log domains</em>.<br />
 (Both actions are usually performed at the beginning of the life-cycle of a software process, what we call the <em>bootstrapping section</em> of a software.)</li>
<li>The interface of the lox object itself is directly used for logging. The log statements work and look similar to <em>debug logging</em>, because as already explained above:<ul>
<li>in Java and C# versions of ALox, the <em>debug logging</em> interface of class <b>Log</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/classaworx_1_1lox_1_1Log.html">C++</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/classcs_1_1aworx_1_1lox_1_1Log.html">C#</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/classcom_1_1aworx_1_1lox_1_1Log.html">JAVA</a>) simply mimics the original interface of class <b>Lox</b> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/classaworx_1_1lox_1_1Lox.html">C++</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html">C#</a>, <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html">JAVA</a>), while</li>
<li>In C++, an own set of preprocessor macros each type of logging exist that differ only in their prefixes <em>Log_</em> and <em>Lox_</em> (<a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/group__GrpMacrosDebugLog.html">ALox Macros For Debug Logging</a> and <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/group__GrpMacrosReleaseLog.html">ALox Macros For Release Logging</a>). <dl class="section note"><dt>Note</dt><dd>In C++, each code entity has to set the preprocessor macro <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/group__GrpALoxMacrosLowLevel.html#ga1f170b96d3ead37b7f530134e64bf121">LOX_LOX</a> prior to using <em>release logging</em> macros. This can be done in a general header file of the software, (e.g. the same that exposes the release-Lox object to that source), or, in more complex scenarios with more than one release-Lox object, at any other appropriate source location.</dd></dl>
</li>
</ul>
</li>
</ol>
<h2>Further Thoughts</h2>
<h3>Pruning Release Logging</h3>
<p>Probably just because it was easy to implement (!), the C++ version of ALox supports the optional pruning of <em>release logging</em> statements as well (see <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cpp_ref/cpp_ref.tag:cpp_ref/" href="cpp_ref/group__GrpALoxCodeSelectorSymbols.html#ga4d0c70512b17f1dd4fa3556f79dd2689">ALOX_REL_LOG</a>). This might sound confusing in the first moment, but it allows to create different versions of release-executables, which is not completely uncommon. It is optional and just provides a next level of flexibility to adopt ALox to complex use cases.</p>
<p>Although (to keep it simple) not provided with the ALox library, the same can be achieved in the other flavors of ALox quite easily.<br />
</p>
<p>For <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/csmainpage.html">ALox for C#</a>, the recipe looks like this:</p><ul>
<li>Create a copy of class <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/cs_ref/cs_ref.tag:cs_ref/" href="cs_ref/classcs_1_1aworx_1_1lox_1_1Log.html">Log</a>, e.g. naming it <b>RLog</b>.</li>
<li>Remove redundant things, e.g. the enum declarations, ALox version number, etc.</li>
<li><p class="startli">Replace the compiler symbol of lines </p><pre class="fragment">  [Conditional("ALOX_DBG_LOG")]
</pre><p class="startli">With a different, new symbol, e.g. ALOX_REL_LOG</p>
</li>
<li>Use this class for <em>release logging</em> the same as class <b>Log</b> is used for debug logging.</li>
<li>Add or remove the new compiler symbol to different release configurations of your C# project</li>
</ul>
<p>For <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/javamainpage.html">ALox for Java</a>, the recipe looks similar:</p><ul>
<li>Create a copy of class <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/classcom_1_1aworx_1_1lox_1_1Log.html">Log</a>, e.g. naming it <b>RLog</b>.</li>
<li>Remove redundant things, e.g. the enum declarations, ALox version number, etc.</li>
<li>Use this class for <em>release logging</em> the same as class <b>Log</b> is used for debug logging.</li>
<li>Maintain an alternative configuration for your <a class="elRef" doxygen="/home/a/mnt/dev/A-Worx/ALox/html/java_ref/java_ref.tag:java_ref/" href="java_ref/javasetup.html#javasetup_pruning_basics">2.1 How Pruning in ALox for Java works</a> 'tool used for obfuscation' to either prune this class (and all invocation on objects of it) or not.</li>
</ul>
<h3>More Complex Use Cases</h3>
<p>ALox allows to be used in various fashions. By having the concept of different <b>Loggers</b> aggregated in one or more <b>Lox</b> objects, using an hierarchical structure of <em>log domains</em>, which by default inherit their <em>domain level</em> from their parent domain (and this way automatically adjust to probably unknown sub-domains), we think that a good balance of "ease of use" and "unlimited extensibility" was found with the ALox architecture.</p>
<p>The simple and common scenarios incorporate:</p><ul>
<li>Debug logging with<ul>
<li>An appropriate <b>Console Logger</b> and probably an IDE specific logger when run in an debugger</li>
<li>Optionally a simple text logger that allows to review the output of 'historic' debug sessions</li>
<li>A few root-level log domains like "UI", "TCPIP", "DB", "IO", etc. having a maximum of one sub domains</li>
</ul>
</li>
<li>Optionally release logging e.g. for collecting severe errors or collecting statistical summaries from 'the field'</li>
</ul>
<p>These scenarios can be addressed with a few lines of <em>bootstrap</em> code and a little discipline when inserting the log statements.</p>
<p>Various ways of matching use cases of complex scenarios with ALox exist. By purpose (to keep things simple) ALox is not providing extended classes, for example to allow pruning release logging as explained in the 'recipes' of the previous paragraph. However, once the basic concepts of ALox are understood, it is easy to build such extensions, tailored to the complex case itself.</p>
<h3>Using ALox and Libraries</h3>
<p>Using ALox with libraries, is basically the same as using ALox in a single code entity. However, we recommend the following principles:</p><ul>
<li>For <em>release logging</em>, a library should provide an initialization method that receives a reference to the dedicated release-Lox instance it is supposed to log into. If such object is not provided (which means the library is not duly initialized), the library should use ALox <em>debug logging</em> to notify that.</li>
<li>A library should not create and set any <b>Loggers</b> by itself. The creation of <b>Loggers</b> should generally be controlled by the main source entity of a process.</li>
<li>A library should document which <em>log domains</em> it is using. Furthermore it is helpful to also disclose which <em>log levels</em> are used in which domain and maybe roughly what log output might be expected. This is especially important for rather uncommon log messages, like severe warnings and errors.</li>
<li>A library should expose a root-level <em>log domain</em> with optionally different sub-domains.</li>
<li>A library should (by nature of all library code) make thoughtful and reasonable use of <em>log levels</em> and <em>log domains</em>. This allows to control the verbosity of the library in granular way.</li>
</ul>
<hr/>
<p> Next chapter: <a class="el" href="group__GrpALoxConfigVars.html">ALox Configuration Variables</a> </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 15 2016 11:32:21 for ALox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
