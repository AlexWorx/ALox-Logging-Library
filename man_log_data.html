<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ALox: 08 - Log Data (Debug Variables)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALox
   &#160;<span id="projectnumber">V. 1702 R. 1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!--ALox Main Menu-->
<div style="background: #2f3a48; " >
<table  class="aworx-menutable"  >
 <tbody>
 <tr style="height: 36px;">
  <td> <a class="aworx-menu_hl" href="index.html"                  >Home</a>                        </td>
  <td> <a class="aworx-menu"    href="cpp_ref/cppmainpage.html"    >ALox for C++</a>                </td>
  <td> <a class="aworx-menu"    href="cs_ref/csmainpage.html"      >ALox for C#</a>                 </td>
  <td> <a class="aworx-menu"    href="java_ref/javamainpage.html"  >ALox for Java</a>               </td>
  <td> <a class="aworx-menu"    href="https://github.com/AlexWorx/ALox-Logging-Library">Download</a></td>
 </tr>
 </tbody>
</table>
</div>
<!--end ALox Main Menu-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">08 - Log Data (Debug Variables) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#man_log_data_prerequisites">1. Prerequisites</a></li>
<li class="level1"><a href="#man_log_data_intro">2. Introduction</a></li>
<li class="level1"><a href="#man_log_data_using">3. Using Log Data</a></li>
<li class="level1"><a href="#man_log_data_langspec">4. Language Specific Notes</a><ul><li class="level2"><a href="#man_log_data_langspec_cpp">4.1 ALox for C++</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="man_log_data_prerequisites"></a>
1. Prerequisites</h1>
<p>For a better understanding of what is explained in this chapter, it might be advisable to have read:</p><ul>
<li>Chapter <a class="el" href="man_scopes.html">05 - Scopes in ALox</a>. In short, at that place it is explained how ALox defines language-related <em>Scopes</em> (including the 'global' <em>Scope</em>) and thread-related <em>Scopes</em>. Both types are 'interwoven' and form the complete set, as denoted in enum-class <b>Scope</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/namespacecs_1_1aworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/enumcom_1_1aworx_1_1lox_1_1Scope.html">Java</a>).</li>
<li>Chapter <a class="el" href="man_log_once.html">06 - Lox.Once()</a></li>
</ul>
<dl class="section attention"><dt>Attention</dt><dd>Both chapters are prerequisites for understanding what is explained here. Especially the use cases that arise from using and combining the different parameters of method <b>Lox.Once</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a6461dec7c62cad4cb618ac730bac95a9">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#adf12d740a5c327f144757d7893af1374">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html#a7347b1bdc9a7abe966bd812190f54db8">Java</a>), which are explained in a high degree of detail in the above mentioned chapter, is not repeated here. If all aspects of using <b>Lox.Once</b> are understood, those can be quite easily adopted to what is described in this section!</dd></dl>
<h1><a class="anchor" id="man_log_data_intro"></a>
2. Introduction</h1>
<p>The concept of <em>Log Data</em> is a feature used for debugging. The goal that is aimed here is similar to the goal of debug-<em>Log Statements</em> themselves. As a reminder, those are:</p><ul>
<li>Have a process log out debug messages, that help to understand a software during the implementation phase.</li>
<li>Avoid adding <b>temporary</b> 'debug output statements'. Instead use <b>permanent</b> code, which can be disabled and preserved for later use, when needed.</li>
</ul>
<p>Corresponding goals are aimed with <em>Log Data</em>. ALox provides this feature to enable the insertion of variables and data into the code that otherwise would be temporarily added for debug purposes and removed afterwards. The same as debug-logging is pruned from release executables, such variables and their use gets pruned. Therefore, such variables and use of them can stay in the code <em>forever</em>, and once a problem in the corresponding code section appears, no need to reinvent temporary code is needed.</p>
<p>A typical example for using <em>Log Data</em> is debug log output written by an exception handler. The code that may cause an exception, could store status information according to <em>Scope.Method</em>. When an exception occurs and the program execution abruptly continues within the exception handler, such information can be retrieved and corresponding log output can be generated giving more information about where and why the exception occurred.</p>
<dl class="section attention"><dt>Attention</dt><dd>The whole concept of <em>Log Data</em> provided by ALox is merely a tool to support the process of debugging and debug code. Code using ALox <em>Log Data</em> should be pruned from release executables. In other words: It is not advised to use ALox Log Data to implement any functionality of an application, for example storing thread-local data used outside of <em>Log Statements</em>. There are other, standardized, reliable and efficient ways to store thread-local data.</dd></dl>
<h1><a class="anchor" id="man_log_data_using"></a>
3. Using Log Data</h1>
<p>The interface for setting and retrieving <em>Log Data</em> is provided with methods <b>Lox.Store</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#ae426500da56a1be2efa28dc5917234fd">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#ad9d88319a84c07a458aa29eccef29cfb">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html#a5c0889cc7e10b5436d6988e9c7e1b4b7">Java</a>), and <b>Lox.Retrieve</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a363a3a48f4296a1adff0a8dc4fbda2d3">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a2737ae699602775284933402741e9df3">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html#aa2f923dc4dceadbd9f1eac792694a5c6">Java</a>).</p>
<p>The type of data stored is <b>Object</b> in Java and C# implementations and <a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lib_1_1boxing_1_1Box.html">Box</a> in <b>ALox for C++</b>.</p>
<p>While in Chapter <a class="el" href="man_log_once.html">06 - Lox.Once()</a> of this manual, it was explained in detail how parameters <code>group</code> and <code>scope</code> of method <b>Lox.Once</b> (<a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/classaworx_1_1lox_1_1Lox.html#a6461dec7c62cad4cb618ac730bac95a9">C++</a>, <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#adf12d740a5c327f144757d7893af1374">C#</a>, <a class="elRef" doxygen="ALox/html/java_ref/java_ref.tag:./java_ref/" href="./java_ref/classcom_1_1aworx_1_1lox_1_1Lox.html#a7347b1bdc9a7abe966bd812190f54db8">Java</a>), can be omitted, how one of them can be used and what happens when both are used, we do not want to repeat these details in this chapter.</p>
<p>Instead we want to discuss the differences:</p><ul>
<li>Instead of storing a counter (in <b>Lox.Once</b>), with <b>Lox.Store</b>, the data object is stored.</li>
<li>Parameter <code>group</code> of method <b>Log.Once</b> is named <code>key</code> in methods <b>Log.Store</b> / <b>Log.Retrieve</b>.</li>
<li>If both parameters (<code>group</code> and <code>scope</code>) are omitted, <b>Log.Once</b> defaults to the 'most inner <em>Scope</em> possible' (by switching the <em>Scope.Filename</em> and creating a unique key from the line number), which is the single log line itself. In contrast to this, <b>Log.Store</b> / <b>Log.Retrieve</b> in the parameterless version refers to the 'most outer <em>Scope</em> possible', hence a global singleton object (singleton in respect to the instance of class <b>Lox</b> used).</li>
</ul>
<p>As a result, the use of <em>Log Data</em> can be summarized as follows:</p><ul>
<li>An otherwise parameterless invocation the methods <b>Log.Store</b> / <b>Log.Retrieve</b> stores and retrieves a global anonymous <em>Log Data</em> object.</li>
<li>If parameter <code>key</code> is provided while parameter <code>scope</code> is omitted (or set to <em>Scope.Global</em>), a named <em>Log Data</em> object is stored and can be retrieved using the same key.</li>
<li>If parameter <code>scope</code> is provided while parameter <code>key</code> is omitted (or nulled or empty), an anonymous <em>Log Data</em> object is stored and can be retrieved (only) from within the same <code>Scope</code> as they were set.</li>
<li>If both parameters, <code>key</code> and <code>scope</code> are provided, then the key is bound to the provided <em>Scope</em> and for this scope a named <em>Log Data</em> object is stored. Consequently, it can be retrieved (only) from within the same <code>Scope</code> as it was set and with using the same <code>key</code>.</li>
</ul>
<p>For clarification, this means, that different <em>Log Data</em> objects are stored in different scopes even if parameters <code>scope</code> and <code>key</code> are the same. For example, an object stored using <code><a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lox.html#aaecc53892786f2fa11e682f633af84c6a4c3880bb027f159e801041b1021e88e8">Scope.Method</a></code> can not be retrieved from a different method and will also not be overwritten within a different method. Again, the consequences and use cases of this design may become clearer when reading chapter <a class="el" href="man_log_once.html">Lox.Once</a>.</p>
<h1><a class="anchor" id="man_log_data_langspec"></a>
4. Language Specific Notes</h1>
<h2><a class="anchor" id="man_log_data_langspec_cpp"></a>
4.1 ALox for C++</h2>
<p>It is important to understand that in ALox for C++, <em>Log Data</em> objects have to be kept in memory, if they are passed as pointers. The question if data is passed as a pointer or as a value is answered in <a class="elRef" doxygen="ALox/html/cpp_ref/cpp_ref.tag:./cpp_ref/" href="./cpp_ref/namespaceaworx_1_1lib_1_1boxing.html">ALib Boxing</a> documentation.</p>
<p>In short, it can be said, that typically all fundamental C++ types (<code>int</code>, <code>char</code>, <code>double</code>, etc.) as well as pointers to those, are stored as values. The same is true for supported string types. However, in the case of strings, the "value" passed is the pointer to the start of the string in the memory. Therefore, this memory has to be kept valid. In the case of storing an <b>AString</b>, the memory stored might become invalid, if the string is extended after it was stored. Be sure to understand this constraint when using this feature.</p>
<h2>4.2 ALox for C# </h2>
<p>In the C# version of ALox, similar to methods <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Log.html#ad1e5a68488b255a1440d0c8cf688b8bc">Log.GetLogger</a> and <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a071e5fd87b8043a1fb918d10d3bbc68d">Lox.GetLogger</a>, methods <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Log.html#a42dcdd8065f82f2459fe120220c4d752">Log.Retrieve</a> and <a class="elRef" doxygen="ALox/html/cs_ref/cs_ref.tag:./cs_ref/" href="./cs_ref/classcs_1_1aworx_1_1lox_1_1Lox.html#a2737ae699602775284933402741e9df3">Lox.Retrieve</a> are <b>not</b> automatically pruned from in release code. The technical restriction here is that a method which is conditionally complied using annotation <em>[Conditional("ALOX_DBG_LOG")]</em> is not allowed to return a value. Therefore, the use of these methods either must appear in parameters of <em>Log Statements</em> (or any other pruned statement) or must be enclosed with corresponding <code>#if</code> / <code>#endif</code> statements.</p>
<hr/>
 <center>Next chapter: <a class="el" href="man_multi_threaded.html">09 - Multi-Threaded Processes</a> </center> <center> <a class="el" href="manual.html">Back to index</a> </center> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 9 2017 16:16:29 for ALox by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
<!-- Start of StatCounter Code e -->
<script type="text/javascript">
var sc_project=11242602;
var sc_invisible=1;
var sc_security="5ac13373";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web statistics"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11242602/0/5ac13373/1/" alt="web
statistics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>
